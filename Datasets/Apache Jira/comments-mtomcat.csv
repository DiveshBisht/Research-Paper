ISSUE_ID,USER,DATE,COMMENT
MTOMCAT-103, Olivier Lamy (*$^¨%`£),28/Oct/11 07:47,"does the file smapi-1.0-war-exec.jar contains the war file smapi-1.0.war ?
As it looks to not be here: how do you configure the mojo in your pom ? "
MTOMCAT-103, Keith Corbin,28/Oct/11 14:07,"I have unziped the smapi1.0-war-exec.jar file and in it I see the smapi-1.0.war file.
I think it is finding the war, other wise I would be seeing the zip file exception that I saw when running it from the wrong directory. 

Here is how I have the plugin configured in the pom:
<plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0-SNAPSHOT</version>
        <executions>
          <execution>
            <id>tomcat-run</id>
            <goals>
              <goal>exec-war-only</goal>
            </goals>
            <phase>package</phase>
            <configuration>
              <path>/smapi-1.0</path>
            </configuration>
          </execution>
        </executions>
      </plugin>  "
MTOMCAT-103, Olivier Lamy (*$^¨%`£),01/Nov/11 18:12,"should be fixed now. issue with path started with /
If you still have issues add a comment with stack trace.
Thanks. "
MTOMCAT-103, Hudson,01/Nov/11 18:15,"Integrated in TomcatMavenPlugin #56 (See https://builds.apache.org/job/TomcatMavenPlugin/56/)
    MTOMCAT-103 Executable War fails to run with a NullPointerException
do not record jar entry starting with / remove it.

olamy : http://svn.apache.org/viewvc/?view=rev&rev=1196179
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractExecWarMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java

 "
MTOMCAT-103, Keith Corbin,01/Nov/11 18:46,That fixed it for me.  Thanks so much for your fast resolution.  This is an amazing plug-in keep up the good work. 
MTOMCAT-104, Olivier Lamy (*$^¨%`£),20/Dec/11 00:13,some fixes has been committed do you still have the issue ? 
MTOMCAT-104, Keith Corbin,20/Dec/11 15:19,Nope this appears to be fixed. 
MTOMCAT-105, Olivier Lamy (*$^¨%`£),03/Nov/11 08:11,"It looks the war generated by your project is not generated.
Does your project produce a war file ?
To trigger exec-war-only goal in the package phase, your execution block must be in build/plugins/plugin rather than in pluginManagement section. "
MTOMCAT-105, albert kam,03/Nov/11 09:36,"Aha, i see !
Yes, it's just like you said, now the the goal is triggered when doing the package phase.
Thank you !

This should be another question, but still i got error when trying to run it with java -jar mywar.jar -httpPort 8080
Caused by: com.sun.faces.config.ConfigurationException: Unable to parse document 'jndi:/localhost/PrimefacesSetup/WEB-INF/faces-config.xml': jndi:/localhost/PrimefacesSetup/WEB-INF/faces-config.xml
        at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:920)
        at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:865)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:656)
        ... 10 more
Caused by: java.io.FileNotFoundException: jndi:/localhost/PrimefacesSetup/WEB-INF/faces-config.xml
        at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnectio
n.java:385)
        at com.sun.faces.config.ConfigManager$ParseTask.getInputStream(ConfigManager.java:1106)
        at com.sun.faces.config.ConfigManager$ParseTask.getDocument(ConfigManager.java:941)
        at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:911)
        ... 14 more

Strange that it's looking in the naming, since i got the file in here (i check the file's existence after extracting the executable war)
C:\Users\albert\workspace\PrimefacesSetup\target\PrimefacesSetup-0.0.1-SNAPSHOT-war-exec\PrimefacesSetup\WEB-INF\faces-config.xml
And yup, it works fine in tomcat7:run ..

Out of topic question :
Do you have a mailing list or a group or forum where i can ask questions ?
I feel bad about making issues without first discussing it. =)
 "
MTOMCAT-105, Olivier Lamy (*$^¨%`£),03/Nov/11 09:59,"see http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/mail-lists.html
Can I have a sample application  to reproduce that ? "
MTOMCAT-105, albert kam,03/Nov/11 10:13,"Here is the simple app attachment, whose executable war runs wrongly, with the error of java.io.FileNotFoundException: jndi:/localhost/BasicSetup/WEB-INF/faces-config.xml "
MTOMCAT-105, Olivier Lamy (*$^¨%`£),03/Nov/11 17:14,"can you try with enabling naming:

<enableNaming>true</enableNaming>

 "
MTOMCAT-105, albert kam,04/Nov/11 01:51,"Thanks for the fast response !

I added that in the plugin configuration, still the same FNFE. And then i tried experimenting the 'useNaming', setting both of the config to true and false, but still the same FNFE.

Just a wild guess from googling around if this has something to do with the classloader classpath where it couldnt see the content of the war that has the WEB-INF/faces-config.xml ? "
MTOMCAT-105, Olivier Lamy (*$^¨%`£),20/Dec/11 00:08,"any way you provide a sample project to reproduce that ?
BTW some changes has been applied could you retry if you still have the issues ? "
MTOMCAT-105, Olivier Lamy (*$^¨%`£),11/Jan/13 15:27,please provide more infos. 
MTOMCAT-106, Olivier Lamy (*$^¨%`£),16/Nov/11 16:45,"please attach a patch file and check ""Grant license to ASF for inclusion in ASF works (as per the Apache License §5)""

Thanks! "
MTOMCAT-106, William Ghelfi,16/Nov/11 17:33,"Just attached a patch 

For a prettified preview, go to: 

https://github.com/apache/tomcat-maven-plugin/pull/1/files "
MTOMCAT-106, Olivier Lamy (*$^¨%`£),16/Nov/11 18:01,"to prevent too much complicated xml configuration.
I would prefer : ExtraDependency extend Dependency "
MTOMCAT-106, William Ghelfi,16/Nov/11 18:19,"Me too! 
But due to my (great) lack of skills as a Java programmer, I was unable to obtain the desired set of classes... so I just sticked with what I found for warDependencies and hacked the code with a bit of copy & paste & rename

Maybe you can properly refactor the patch? "
MTOMCAT-106, Olivier Lamy (*$^¨%`£),16/Nov/11 22:40,you are using mvn 2.x ? 
MTOMCAT-106, William Ghelfi,16/Nov/11 22:58,"Yep, 2.2.1 "
MTOMCAT-106, Olivier Lamy (*$^¨%`£),16/Nov/11 23:06,"ok. fyi You won't have this issue with 3.x
BTW I have to fix that  "
MTOMCAT-106, William Ghelfi,16/Nov/11 23:25,"Thank you 
At the moment I have to keep the software I'm co-working on, at version 2.2.1 because it's quite complex and many components and features need to be re-thinked before we can upgrade to mvn 3.

We will approach mvn 3 during 2012 for sure, but for the next release we really look forward for your fix 

Thank you again for your great work and quick response "
MTOMCAT-106, Olivier Lamy (*$^¨%`£),17/Nov/11 10:43,"patch not used. Implemented with a more easy solution.
SNAPSHOT deployed to http://repository.apache.org/content/groups/snapshots-group/

reopen if you still have issue. "
MTOMCAT-106, Hudson,17/Nov/11 10:51,"Integrated in TomcatMavenPlugin #66 (See https://builds.apache.org/job/TomcatMavenPlugin/66/)
    MTOMCAT-106 tomcat7-maven-plugin extraDependency not working with class not found
attached patch not used, implements a more simple solution.

olamy : http://svn.apache.org/viewvc/?view=rev&rev=1203144
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractExecWarMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/ExtraDependency.java

 "
MTOMCAT-106, William Ghelfi,17/Nov/11 12:09,"Thank you, works fine "
MTOMCAT-108, Brad Giaccio,16/Dec/11 14:30,"I've tested this patch on Mac OSX 10.6.8, Fedora Core 16, and Redhat Linux 5.4

It handles, httpPort not being set so only https starts up
it adds 3 options to the startup
-keyAlias
-clientAuth
It checks for the 6 -Djavax.net.ssl properties for setting up key and trust stores

I also added PasswordUtil to allow the passwords to be obfuscated (a security requirement for some systems is no passwords in clear text ... I know obfuscation is like closing your front door and hoping know one uses the peep hole).

I've confirmed function as best I can with and without http turned on and with and without clientAuth.  It appears to be working correctly. "
MTOMCAT-108, Olivier Lamy (*$^¨%`£),16/Dec/11 14:39,@Brad looks a good patch. Note the maven plugin use the maven code formatting: http://maven.apache.org/developers/conventions/code.html 
MTOMCAT-108, Olivier Lamy (*$^¨%`£),16/Dec/11 21:41,btw regarding this obfuscate stuff I wonder how it's secured as the deobfuscate method is open source  
MTOMCAT-108, Brad Giaccio,18/Dec/11 02:47,"@Oliver
1. Sorry about the formatting I tried to follow what you had, as odd as it looked.  If you can't take it as is then I'll have to fix it on Monday.
2. As for the obfuscate stuff, its most definitely breakable but at least 'protects' it from prying eyes.  In the environment I'll be using this having plain texts passwords is a deal breaker and will mean I can't install my software, so please please keep it.  

If there is anything else I can do let me know "
MTOMCAT-108, Olivier Lamy (*$^¨%`£),19/Dec/11 09:14,"why not reading the password from a file ? 
And -httpsPasswordFile= (the file will contains only the password)
this comment ""Lifted from Jetty org.mortbay.jetty.security.Password"" can/will lead in some ip issues.
With such source code import, license headers must be preserve and I don't see that in your patch. "
MTOMCAT-108, Brad Giaccio,19/Dec/11 14:09,"Reading plain text from a file wouldn't help the security scan software would still find it, it needs to be non-human-readable.

The code http://grepcode.com/file_/repo1.maven.org/maven2/org.mortbay.jetty/jetty/6.1.11/org/mortbay/jetty/security/Password.java/?v=source
Uses the Apache 2.0 License which says I can reuse the code and I just put your style of comment in the header so it would match the rest of your code. "
MTOMCAT-108, Brad Giaccio,19/Dec/11 18:50,"1. Cleaned up formatting

2. Added a @see to PaswordUtil pointing back to Jetty Source

3. Will apply cleanly after your patch to MTOMCAT-109 "
MTOMCAT-108, Olivier Lamy (*$^¨%`£),19/Dec/11 23:52,"applied.
SNAPSHOT will deployed by jenkins build.
Reopen if any issues.
Thanks for the patch! "
MTOMCAT-108, Hudson,20/Dec/11 00:20,"Integrated in TomcatMavenPlugin #75 (See https://builds.apache.org/job/TomcatMavenPlugin/75/)
    MTOMCAT-108 The httpsPort flag starts another http thread not an https thread
Submitted by Brad Giaccio.

olamy : http://svn.apache.org/viewvc/?view=rev&rev=1221023
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/PasswordUtil.java
	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java
	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7RunnerCli.java

 "
MTOMCAT-108, Keith Corbin,20/Dec/11 15:31,How long will it take for this to make its way to the Maven repo?   
MTOMCAT-108, Olivier Lamy (*$^¨%`£),20/Dec/11 15:40,"@Keith until a release 
Currently you can use 2.0-SNAPSHOT to test.
see http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html "
MTOMCAT-108, Keith Corbin,20/Dec/11 15:44,"@Olivier.  Sorry, I meant when will it be available in the SNAPSHOT?  Currently the SNAPSHOT is showing a last build date of Novermber 11th, 2011. "
MTOMCAT-108, Brad Giaccio,21/Dec/11 18:42,"@Keith what Repository are you looking in https://repository.apache.org/content/groups/snapshots-group/org/apache/tomcat/maven/tomcat7-war-runner/2.0-SNAPSHOT/
The files from Tue Dec 20 00:16:29 UTC 2011, the ones after  that (i.e Today) appear to have fixes for MTOMCAT-110 and MTOMCAT-111 as well "
MTOMCAT-108, Olivier Lamy (*$^¨%`£),21/Dec/11 18:49,"http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
says https://repository.apache.org/content/groups/snapshots-group "
MTOMCAT-108, Keith Corbin,21/Dec/11 21:33,"My bad, I was looking at the old repo location.
--Keith


On Wed, Dec 21, 2011 at 1:51 PM, Olivier Lamy (Commented) (JIRA) <
 "
MTOMCAT-118, Olivier Lamy (*$^¨%`£),02/Feb/12 10:04,which maven version are you using ? 
MTOMCAT-118, Dave Lund,02/Feb/12 10:09,apologizes mvn --version output attached to environment field 
MTOMCAT-118, Olivier Lamy (*$^¨%`£),02/Feb/12 10:49,"argh I see this can work only with 3.0.3+
I will fix that but until you must use 3.0.3/3.0.4 "
MTOMCAT-118, Dave Lund,02/Feb/12 11:27,Thanks for the work around - I've no problem with upgrading maven anyway 
MTOMCAT-118, Hudson,03/Feb/12 17:34,"Integrated in TomcatMavenPlugin-mvn3.x #112 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/112/)
    MTOMCAT-118 tomcat7:run wont accept additionalClasspathDir arguments
before 3.0.3 maven doesn't support mojo fields Collections other than String

olamy : http://svn.apache.org/viewvc/?view=rev&rev=1240234
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/RunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/RunMojo.java

 "
MTOMCAT-119, Nick Lloyd,08/Aug/12 20:03,"The reason for this is actually in org.apache.catalina.startup.ContextConfig processContextConfig implementation for tomcat 7, which is different from tomcat 6.  Digging into that code shows in tomcat 6 some careful ""does this file exist?"" checks before any xml stream parsing happens.  In tomcat 7 an InputSource is created against the file without checking for the file's existence (which is allowed).  After that an attempt is made to create a stream from that InputSource, which fails, but moving forward from that the method only checks for the presence/absence of the InputSource instance instead of whether or not the stream was created successfully.

Whether this is a bug in tomcat 7 or not I do not know. "
MTOMCAT-119, Glen Mazza,10/Jan/13 14:54,"I'm attaching perhaps a simpler example to replicate the matter.  

This attached sample works fine, because in webapps/META-INF I have a context.xml file with this content:  <context/>

To test the sample, from the base root, run:
mvn clean install tomcat:run-war

Then check from a browser:
http://localhost:8080/doubleit/services/doubleit?wsdl
that you can see a WSDL document (i.e., working).

If I remove the context.xml file, I get the similar file-not-found exception as the original poster. "
MTOMCAT-119, Glen Mazza,10/Jan/13 22:12,"Patch attached.  Note one slight potential drawback, is that now both tomcat7:run & tomcat7:run-war will check for the default META-INF/context.xml if contextFile is not explicitly configured (and use that file), however neither will report anything if that file is not present (as it doesn't need to be).  In the past only tomcat7:run-war checks for that file if contextFile is not set.

This patch fixes the exception because now if META-INF/context.xml is not present (and contextFile not explicitly configured for another file), no file is sent to Tomcat and hence the latter will use whatever context defaults it uses.  However, if you explicitly configure any file via contextFile that doesn't exist Tomcat will continue to throw a File Not Found exception (as it should), alerting the developer to the problem.

Unrelated issue fixed, in AbstractRunWarMojo the @Parameter property ""maven.tomcat.warDirectory"" was not defined, making users unable to provide a setting via the CLI -Dmaven.tomcat.warDirectory option (although it is defined in that class' parent AbstractRunMojo, I've found there's no inheritance of individual @Parameter values, just the @Parameter tag itself.) "
MTOMCAT-119, Olivier Lamy (*$^¨%`£),11/Jan/13 14:42,"fixed http://svn.apache.org/r1432054
Thanks ! "
MTOMCAT-119, Hudson,30/Jan/13 10:50,"Integrated in TomcatMavenPlugin-mvn3.x #227 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/227/)
    MTOMCAT-119 tomcat7:run-war fails because it expects META-INF\context.xml
Submitted by Glen Mazza (Revision 1432054)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1432054
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunWarMojo.java

 "
MTOMCAT-123, Nathan Schile,05/Mar/12 17:17,Test project that demonstrates bug. 
MTOMCAT-123, Olivier Lamy (*$^¨%`£),05/Mar/12 22:03,"fixed r1297241.
SNAPSHOT deployed. "
MTOMCAT-123, Hudson,06/Mar/12 14:17,"Integrated in TomcatMavenPlugin-mvn3.x #114 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/114/)
    MTOMCAT-123 Can't add test scoped dependency filters to web.xml. (Revision 1297241)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1297241
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/RunMojo.java

 "
MTOMCAT-125, Olivier Lamy (*$^¨%`£),12/Mar/12 12:21,"Do you have more logs ? (especially container start )
How do you add dependency on your jdbc driver when you use the plugin ? "
MTOMCAT-125, guofeng zhang,13/Mar/12 11:08,"I add the jdbc driver and commons-dbcp to the plugin's dependencies.

I have a sample project, but I donot know how to attach it here. I have posted it in the mailing list. 

The following is the output on the Console (I use WIndows 7):


Mar 13, 2012 7:04:23 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler [""http-bio-9090""]
Mar 13, 2012 7:04:23 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
Mar 13, 2012 7:04:23 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Mar 13, 2012 7:04:24 PM org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment
INFO: No global web.xml found
Mar 13, 2012 7:04:24 PM org.apache.catalina.startup.ContextConfig webConfig
SEVERE: Unable to determine URL for WEB-INF/classes
javax.naming.NameNotFoundException: Resource /WEB-INF/classes not found
        at org.apache.naming.resources.BaseDirContext.listBindings(BaseDirContext.java:733)
        at org.apache.naming.resources.ProxyDirContext.listBindings(ProxyDirContext.java:546)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1197)
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:825)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:300)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Mar 13, 2012 7:04:27 PM org.apache.catalina.core.StandardContext addApplicationListener
INFO: The listener ""com.sun.faces.config.ConfigureListener"" is already configured for this context. The duplicate defini
tion has been ignored.
Mar 13, 2012 7:04:27 PM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.1.4 (SNAPSHOT 20111107) for context '/webds'
Mar 13, 2012 7:04:27 PM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will ha
ve said annotations processed.
javax.naming.NameNotFoundException: Name jdbc is not bound in this Context
        at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
        at org.apache.naming.factory.ResourceLinkFactory.getObjectInstance(ResourceLinkFactory.java:94)
        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
        at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at sample.DatabaseInitializer.processEvent(DatabaseInitializer.java:32)
        at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
        at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
        at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2144)
        at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:302)
        at com.sun.faces.config.ConfigManager.publishPostConfigEvent(ConfigManager.java:600)
        at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:369)
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Mar 13, 2012 7:04:27 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler [""http-bio-9090""] "
MTOMCAT-125, guofeng zhang,13/Mar/12 11:10,I attached the sample for reproducing it. 
MTOMCAT-128, Olivier Lamy (*$^¨%`£),30/Jan/13 15:36,"fixed.
If you could try 2.1-SNAPSHOT. "
MTOMCAT-128, Hudson,30/Jan/13 15:48,"Integrated in TomcatMavenPlugin-mvn3.x #229 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/229/)
    MTOMCAT-128 The plugin ignores and/or parses web.xml incorrectally when using tomcatWebXml option (Revision 1440473)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1440473
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/pom.xml
	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/AbstractRunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/RunMojo.java

 "
MTOMCAT-128, Gilberto C Andrade,30/Jan/13 17:46,"I can't, receiving 302 Found error:
<quote>
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar (427 B at 0.4 KB/sec)
[WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT: Failed to parse plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT (/home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar): error in opening zip file
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/sonatype/plugins/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/com/ning/maven/plugins/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.1-SNAPSHOT is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.623s
[INFO] Finished at: Wed Jan 30 14:43:10 BRT 2013
[INFO] Final Memory: 6M/245M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to parse plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT (/home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar): error in opening zip file -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginDescriptorParsingException

</quote> "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),31/Jan/13 13:19,"any network issues accessing to  http://repository.apache.org/content/repositories/snapshots ?

what is the content of those files:

	/home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar
	/home/gilberto.andrade/.m2/repository/org/sonatype/plugins/maven-metadata-apache.snapshots.xml

 "
MTOMCAT-128, Gilberto C Andrade,31/Jan/13 16:14,"Yes, I have this problem:

gilberto.andrade@A37710:~$ cat /home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar
<!DOCTYPE HTML PUBLIC ""-//IETF//DTD HTML 2.0//EN"">
<html><head>
<title>302 Found</title>
</head><body>
<h1>Found</h1>
<p>The document has moved <a href=""https://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar"">here</a>.</p>
<hr>
<address>Apache/2.2.20 (Ubuntu) Server at repository.apache.org Port 80</address>
</body></html>


and 

gilberto.andrade@A37710:~$ cat  /home/gilberto.andrade/.m2/repository/org/sonatype/plugins/maven-metadata-apache.snapshots.xml
<!DOCTYPE HTML PUBLIC ""-//IETF//DTD HTML 2.0//EN"">
<html><head>
<title>302 Found</title>
</head><body>
<h1>Found</h1>
<p>The document has moved <a href=""https://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml"">here</a>.</p>
<hr>
<address>Apache/2.2.20 (Ubuntu) Server at repository.apache.org Port 80</address>
</body></html>
gilberto.andrade@A37710:~$ 

 "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),31/Jan/13 16:19,"weird which maven version are you using ?
Last one follow redirect.
To fix that you can probably use directly https://repository.apache.org/content/repositories/snapshots as snapshots repository. (note https rather than http) "
MTOMCAT-128, Gilberto C Andrade,31/Jan/13 16:28,"gilberto.andrade@A37710:~/dev/netbeans-config/reca$ mvn --version
Apache Maven 3.0.3 (r1075438; 2011-02-28 14:31:09-0300)
Maven home: /home/gilberto.andrade/bin/maven
Java version: 1.7.0_07, vendor: Oracle Corporation
Java home: /usr/java/jdk1.7.0_07/jre
Default locale: en_US, platform encoding: UTF-8
OS name: ""linux"", version: ""3.4.11-2.16-desktop"", arch: ""amd64"", family: ""unix""

Can you access this URL https://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml ? "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),31/Jan/13 16:30,"why this groupId org.sonatype.plugins ??
this is not something hosted @ asf "
MTOMCAT-128, Gilberto C Andrade,31/Jan/13 16:42,"My settings.xml:

<?xml version=""1.0"" encoding=""UTF-8""?>
<settings xsi:schemaLocation=""http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"" xmlns=""http://maven.apache.org/SETTINGS/1.0.0""
    xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">
  <localRepository>/home/gilberto.andrade/.m2/repository</localRepository>
  <pluginGroups>
    <pluginGroup>org.sonatype.plugins</pluginGroup>
    <pluginGroup>com.ning.maven.plugins</pluginGroup>
    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
  </pluginGroups>

Is there anything wrong here? "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),31/Jan/13 16:48,"
curl -I https://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml
HTTP/1.1 404 The server has not found anything matching the request URI
Date: Thu, 31 Jan 2013 16:46:41 GMT
Server: Noelios-Restlet-Engine/1.1.6-SONATYPE-5348-V4
Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
Content-Type: text/html;charset=ISO-8859-1
Cache-Control: must-revalidate,no-cache,no-store
Content-Length: 1533
Set-Cookie: rememberMe=deleteMe; Path=/; Max-Age=0; Expires=Wed, 30-Jan-2013 16:46:41 GMT


so maven see 404 and doesn't care of that.
Can you cleanup your local repo ? 
rm -rf  /home/gilberto.andrade/.m2/repository/org/sonatype/plugins
rm -rf  /home/gilberto.andrade/.m2/repository/org/apache/tomcat

then try again with -U "
MTOMCAT-128, Gilberto C Andrade,31/Jan/13 17:00,"gilberto.andrade@A37710:~/dev/netbeans-config/reca$ mvn clean tomcat7:run -U
[INFO] Scanning for projects...
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 991a6c7b11f614906b14932cd6da49132ff2d5fa for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 991a6c7b11f614906b14932cd6da49132ff2d5fa for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml (408 B at 0.3 KB/sec)
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 991a6c7b11f614906b14932cd6da49132ff2d5fa for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 991a6c7b11f614906b14932cd6da49132ff2d5fa for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml (408 B at 0.4 KB/sec)
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.1-SNAPSHOT is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT: Failed to parse plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT (/home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar): error in opening zip file
Downloading: http://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/com/ning/maven/plugins/maven-metadata.xml
Downloading: http://10.121.0.20/nexus/content/groups/public/org/sonatype/plugins/maven-metadata.xml
Downloading: http://10.121.0.20/nexus/content/groups/public/com/ning/maven/plugins/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 42b6a1762e310b461c052c6f0485e27ee726cafc for http://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 8e05b41e2e84155240f72e1a29f0dcab2d655b31 for http://repository.apache.org/content/repositories/snapshots/com/ning/maven/plugins/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 42b6a1762e310b461c052c6f0485e27ee726cafc for http://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/sonatype/plugins/maven-metadata.xml (371 B at 0.4 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 8e05b41e2e84155240f72e1a29f0dcab2d655b31 for http://repository.apache.org/content/repositories/snapshots/com/ning/maven/plugins/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/com/ning/maven/plugins/maven-metadata.xml (373 B at 0.3 KB/sec)
Downloading: http://10.121.0.20/nexus/content/groups/public/org/apache/tomcat/maven/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is ed7e2a3c7cec5a1e645379ac9e14f80220fc73ab for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is ed7e2a3c7cec5a1e645379ac9e14f80220fc73ab for http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/maven-metadata.xml (374 B at 0.4 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/maven/plugins/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is be141f6099c09fce32d9695eaf8e82c93f0a69d8 for http://repository.apache.org/content/repositories/snapshots/org/apache/maven/plugins/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is be141f6099c09fce32d9695eaf8e82c93f0a69d8 for http://repository.apache.org/content/repositories/snapshots/org/apache/maven/plugins/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/maven/plugins/maven-metadata.xml (375 B at 0.4 KB/sec)
Downloading: http://10.121.0.20/nexus/content/groups/public/org/apache/maven/plugins/maven-metadata.xml
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/sonatype/plugins/maven-metadata.xml (5 KB at 0.5 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/codehaus/mojo/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 3ce2d306c8170ffe1d7741121a9295c3163824c5 for http://repository.apache.org/content/repositories/snapshots/org/codehaus/mojo/maven-metadata.xml
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 3ce2d306c8170ffe1d7741121a9295c3163824c5 for http://repository.apache.org/content/repositories/snapshots/org/codehaus/mojo/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/codehaus/mojo/maven-metadata.xml (368 B at 0.3 KB/sec)
Downloading: http://10.121.0.20/nexus/content/groups/public/org/codehaus/mojo/maven-metadata.xml
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/apache/tomcat/maven/maven-metadata.xml (753 B at 0.0 KB/sec)
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/apache/maven/plugins/maven-metadata.xml (12 KB at 0.7 KB/sec)
Downloaded: http://10.121.0.20/nexus/content/groups/public/com/ning/maven/plugins/maven-metadata.xml (616 B at 0.0 KB/sec)
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/codehaus/mojo/maven-metadata.xml (27 KB at 0.6 KB/sec)
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/sonatype/plugins/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/com/ning/maven/plugins/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The metadata /home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/maven-metadata-apache.snapshots.xml is invalid: end tag name </body> must match start tag name <hr> from line 7 (position: TEXT seen ...</address>\n</body>... @9:8) 
[WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.1-SNAPSHOT is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:00.526s
[INFO] Finished at: Thu Jan 31 13:58:47 BRT 2013
[INFO] Final Memory: 6M/245M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to parse plugin descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:2.1-SNAPSHOT (/home/gilberto.andrade/.m2/repository/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-SNAPSHOT.jar): error in opening zip file -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginDescriptorParsingException
gilberto.andrade@A37710:~/dev/netbeans-config/reca$  "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),31/Jan/13 19:55,Please use https://repository.apache.org/content/repositories/snapshots (note it's httpS ) as maven 3.0.3 can have issues with following redirect and/or upgrade to maven 3.0.4 
MTOMCAT-128, Gilberto C Andrade,01/Feb/13 15:02,"I've update maven to 3.0.4. But ...
It seems that the fix didn't no effect:

gilberto.andrade@A37710:~/dev/netbeans-config/reca$ mvn clean tomcat7:run
[INFO] Scanning for projects...
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml (790 B at 0.3 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-20130131.210909-32.pom
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-20130131.210909-32.pom (12 KB at 10.6 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml (827 B at 0.8 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat-maven-plugin/2.1-SNAPSHOT/tomcat-maven-plugin-2.1-20130131.210904-33.pom
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat-maven-plugin/2.1-SNAPSHOT/tomcat-maven-plugin-2.1-20130131.210904-33.pom (31 KB at 28.8 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-20130131.210909-32.jar
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-maven-plugin/2.1-SNAPSHOT/tomcat7-maven-plugin-2.1-20130131.210909-32.jar (103 KB at 51.8 KB/sec)
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Recadastramento de Servidores Civis e Militares 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] — maven-clean-plugin:2.4.1:clean (default-clean) @ reca —
[INFO] Deleting /home/gilberto.andrade/dev/netbeans-config/reca/target
[INFO] 
[INFO] >>> tomcat7-maven-plugin:2.1-SNAPSHOT:run (default-cli) @ reca >>>
[INFO] 
[INFO] — maven-resources-plugin:2.5:resources (default-resources) @ reca —
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 7 resources
[INFO] Copying 13 resources
[INFO] Copying 1 resource to /home/gilberto.andrade/dev/netbeans-config/reca/target/reca/WEB-INF/
[INFO] Copying 34 resources
[INFO] 
[INFO] — maven-compiler-plugin:2.3.2:compile (default-compile) @ reca —
[INFO] Compiling 99 source files to /home/gilberto.andrade/dev/netbeans-config/reca/target/reca/WEB-INF/classes
[WARNING] bootstrap class path not set in conjunction with -source 1.5
/home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/DeleteUser.java:[70,18] [deprecation] AttributeModifier(String,boolean,IModel<?>) in AttributeModifier has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/DeleteUser.java:[90,17] [deprecation] AttributeModifier(String,boolean,IModel<?>) in AttributeModifier has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/FindByServidor.java:[80,22] [deprecation] addComponent(Component...) in AjaxRequestTarget has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/FindByServidor.java:[104,22] [deprecation] addComponent(Component...) in AjaxRequestTarget has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/FindByServidor.java:[105,22] [deprecation] addComponent(Component...) in AjaxRequestTarget has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/FindByServidor.java:[107,26] [deprecation] addComponent(Component...) in AjaxRequestTarget has been deprecated
[WARNING] /home/gilberto.andrade/dev/netbeans-config/reca/src/main/java/br/gov/to/secad/seg/view/FindByServidor.java:[114,22] [deprecation] addComponent(Component...) in AjaxRequestTarget has been deprecated
[INFO] 
[INFO] — jasperreports-maven-plugin:1.0-beta-2:compile-reports (jrc) @ reca —
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-beanutils/commons-beanutils/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/commons-beanutils/commons-beanutils/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-beanutils/commons-beanutils/maven-metadata.xml (330 B at 0.3 KB/sec)
Downloading: http://snapshots.repository.codehaus.org/commons-beanutils/commons-beanutils/1.8.4-SNAPSHOT/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-beanutils/commons-beanutils/1.8.4-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-beanutils/commons-beanutils/1.8.4-SNAPSHOT/maven-metadata.xml (2 KB at 1.0 KB/sec)
Downloading: http://snapshots.repository.codehaus.org/commons-collections/commons-collections/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-collections/commons-collections/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-collections/commons-collections/maven-metadata.xml (330 B at 0.3 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-collections/commons-collections/4.0-SNAPSHOT/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/commons-collections/commons-collections/4.0-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-collections/commons-collections/4.0-SNAPSHOT/maven-metadata.xml (3 KB at 2.4 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-digester/commons-digester/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/commons-digester/commons-digester/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/commons-logging/commons-logging/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-logging/commons-logging/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-logging/commons-logging/maven-metadata.xml (364 B at 0.2 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/commons-logging/commons-logging/1.1.2-SNAPSHOT/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/commons-logging/commons-logging/1.1.2-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/commons-logging/commons-logging/1.1.2-SNAPSHOT/maven-metadata.xml (3 KB at 2.0 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/itext/itext/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/itext/itext/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/jfree/jcommon/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/jfree/jcommon/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/jfree/jfreechart/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/jfree/jfreechart/maven-metadata.xml
Downloading: http://repository.apache.org/content/repositories/snapshots/eclipse/jdtcore/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/eclipse/jdtcore/maven-metadata.xml
[INFO] Nothing to compile - all Jasper reports are up to date
[INFO] 
[INFO] <<< tomcat7-maven-plugin:2.1-SNAPSHOT:run (default-cli) @ reca <<<
[INFO] 
[INFO] — tomcat7-maven-plugin:2.1-SNAPSHOT:run (default-cli) @ reca —
Downloading: http://10.121.0.20/nexus/content/groups/public/org/eclipse/jdt/core/compiler/ecj/4.2.1/ecj-4.2.1.pom
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/eclipse/jdt/core/compiler/ecj/4.2.1/ecj-4.2.1.pom (2 KB at 0.1 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/maven-metadata.xml (796 B at 0.5 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/common-tomcat-maven-plugin-2.1-20130131.210902-33.pom
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/common-tomcat-maven-plugin-2.1-20130131.210902-33.pom (5 KB at 4.2 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/maven-metadata.xml (788 B at 0.7 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/tomcat7-war-runner-2.1-20130131.210910-33.pom
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/tomcat7-war-runner-2.1-20130131.210910-33.pom (4 KB at 3.5 KB/sec)
Downloading: http://10.121.0.20/nexus/content/groups/public/org/eclipse/jdt/core/compiler/ecj/4.2.1/ecj-4.2.1.jar
Downloaded: http://10.121.0.20/nexus/content/groups/public/org/eclipse/jdt/core/compiler/ecj/4.2.1/ecj-4.2.1.jar (1755 KB at 77.2 KB/sec)
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/common-tomcat-maven-plugin-2.1-20130131.210902-33.jar
Downloading: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/tomcat7-war-runner-2.1-20130131.210910-33.jar
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/tomcat7-war-runner/2.1-SNAPSHOT/tomcat7-war-runner-2.1-20130131.210910-33.jar (24 KB at 12.1 KB/sec)
Downloaded: http://repository.apache.org/content/repositories/snapshots/org/apache/tomcat/maven/common-tomcat-maven-plugin/2.1-SNAPSHOT/common-tomcat-maven-plugin-2.1-20130131.210902-33.jar (38 KB at 17.0 KB/sec)
[INFO] Running war on http://localhost:8080/reca
[INFO] Creating Tomcat server configuration at /home/gilberto.andrade/dev/netbeans-config/reca/target/tomcat
[INFO] create webapp with contextPath: /reca
Feb 01, 2013 11:43:15 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler [""http-bio-8080""]
Feb 01, 2013 11:43:15 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
Feb 01, 2013 11:43:15 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
Feb 01, 2013 11:43:18 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
11:43:20,423  INFO WebXmlFile:243 - web.xml: url mapping found for filter with name RECA: [/*]
Feb 01, 2013 11:43:20 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter RECA
java.lang.IllegalArgumentException: Invalid configuration type: '$
{wicket.MODE}
'.  Must be ""development"" or ""deployment"".
        at org.apache.wicket.protocol.http.WebApplication.getConfigurationType(WebApplication.java:667)
        at org.apache.wicket.Application.configure(Application.java:297)
        at org.apache.wicket.protocol.http.WebApplication.internalInit(WebApplication.java:610)
        at org.apache.wicket.Application.initApplication(Application.java:804)
        at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:346)
        at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:286)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5312)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Feb 01, 2013 11:43:20 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Feb 01, 2013 11:43:20 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/reca] startup failed due to previous errors
Feb 01, 2013 11:43:20 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Feb 01, 2013 11:43:20 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/reca] registered the JDBC driver [org.postgresql.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Feb 01, 2013 11:43:20 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler [""http-bio-8080""] "
MTOMCAT-128, Olivier Lamy (*$^¨%`£),01/Feb/13 15:22,please provide a sample project to reproduce. 
MTOMCAT-128, Gilberto C Andrade,01/Feb/13 16:20,Sample maven project 
MTOMCAT-128, Olivier Lamy (*$^¨%`£),01/Feb/13 21:56,"Thanks.
But I understand more your trouble now.
tomcatWebXml field is to override the usual global web.xml used by tomcat (usually located in $CATALINA_HOME/conf/web.xml)
See in  target/tomcat/conf/web.xml 
But what you can do to have interpolations of src/main/webapp/WEB-INF/web.xml is something like that:

            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.1-SNAPSHOT</version>
                <configuration> 
                  ...
                  <systemProperties>
                    <wicket.MODE>${wicket.MODE}</wicket.MODE>
                  </systemProperties>
                  ...
                </configuration> 
            </plugin>

 "
MTOMCAT-128, Gilberto C Andrade,18/Apr/13 19:47,"Hi
Just one question: why tomcatWebXml field is used to override the usual global one if I'm using an embedded Tomcat server?
Shouldn't, thus, exist the embeddedTomcatWebXml field as well?
Regards "
MTOMCAT-128, Manuel Pereira González,24/Jul/14 13:27,"Hello, we are in the same situation, we need to use a web.xml not placed in WEB-INF/classes, in order to use the maven-filtered one, that is available in ""target"" directory not in ""src/main/webapp"" directory.
I just modified tomcat7-maven-plugin to add a new parameter, just adding those lines to AbstractRunMojo.java:

On variable definitions:

    @Parameter( property = ""maven.tomcat.webXmlPath"" )
    private String webXmlPath;

On startContainer() method, after those lines:
                embeddedTomcat.setDefaultRealm( memoryRealm );
                Context ctx = createContext( embeddedTomcat );
Add those ones:
                ServletContext servletContext = ctx.getServletContext();
                if (servletContext != null && webXmlPath != null) 
{
                    servletContext.setAttribute(""org.apache.catalina.deploy.alt_dd"", webXmlPath);
                }

With those modifications, you can use the new parameter ""webXmlPath"" con configuration of your tomcat7-maven-plugin:
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.2</version>
        <configuration>
            ....
            <webXmlPath>$
{project.build.directory}
/Web127/WEB-INF/web.xml</webXmlPath>
          </configuration>
        </plugin>

Regards. "
MTOMCAT-129, Justin Wunderle,16/Mar/12 19:03,"A workaround is to run maven with -Dmaven.tomcat.path="""" and don't set <path> to something else in the plugin's configuration (<path></path> is ok) "
MTOMCAT-133, Gildas Cuisinier,04/Apr/12 11:44,"I try to map servlet to ""/"" in web.xml, that works.


For information, in Spring documentation, you have this quote : 


Mapping to '/' under Tomcat
Apache Tomcat maps its internal DefaultServlet to ""/"", and on Tomcat versions <= 7.0.14, this servlet mapping cannot be overridden programmatically. 7.0.15 fixes this issue. Overriding the ""/"" servlet mapping has also been tested successfully under GlassFish 3.1.

The related issue in tomcat : https://issues.apache.org/bugzilla/show_bug.cgi?id=51278

 "
MTOMCAT-133, Gildas Cuisinier,04/Apr/12 14:51,"Here is new information to solve this bug:

The code to add mapping :
ServletRegistration.Dynamic myServlet = servletContext.addServlet(//);
Set<String> conflicts = myServlet.addMapping(""/"");

In Tomcat 7 standalone, the conflits set is empty.
In Maven Tomcat 7 plugin, the conflicts set contains the String ""/"".


I investigate, and one difference I found is that the ""Wrapper"" for the jsp servlet and the default servlet is ""overridable"" in tomcat 7 but not in maven plugin context.
 "
MTOMCAT-133, Gildas Cuisinier,04/Apr/12 19:55,"The difference comes from the declaration of default servlets.

In the plugin, the declaration is made into ""Tomcat"" class, in the method initWebappDefaults.

 Wrapper servlet = addServlet(
                ctx, ""default"", ""org.apache.catalina.servlets.DefaultServlet"");
        servlet.setLoadOnStartup(1);

        // JSP servlet (by class name - to avoid loading all deps)
        servlet = addServlet(
                ctx, ""jsp"", ""org.apache.jasper.servlet.JspServlet"");
        servlet.addInitParameter(""fork"", ""false"");
        servlet.setLoadOnStartup(3)

And in this way, the wrapper is not set as overridable.

 "
MTOMCAT-133, Olivier Lamy (*$^¨%`£),05/Apr/12 22:37,fixed. 
MTOMCAT-133, Hudson,06/Apr/12 01:20,"Integrated in TomcatMavenPlugin-mvn3.x #123 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/123/)
    MTOMCAT-133 Servlet mapping to ""/"" does not work
apply same fix for the exec war feature. (Revision 1310131)
MTOMCAT-133 Servlet mapping to ""/"" does not work
use the defaut web.xml (Revision 1310113)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1310131
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractExecWarMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java



olamy : http://svn.apache.org/viewvc/?view=rev&rev=1310113
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-134, John Meyer,04/Apr/12 19:23,Proposed fix 
MTOMCAT-134, Olivier Lamy (*$^¨%`£),04/Apr/12 19:32,"patch applied.
Thanks! "
MTOMCAT-134, Hudson,04/Apr/12 19:42,"Integrated in TomcatMavenPlugin-mvn3.x #120 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/120/)
    MTOMCAT-134 Empty additionalClasspathDir causes NPE in RunMojo.java
Submitted by John Meyer. (Revision 1309560)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1309560
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/RunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/RunMojo.java

 "
MTOMCAT-135, Hudson,05/Apr/12 22:36,"Integrated in TomcatMavenPlugin-mvn3.x #122 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/122/)
    MTOMCAT-135 tomcat7:run does not load HandlesTypes in application classes (Revision 1310083)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1310083
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-136, Olivier Lamy (*$^¨%`£),05/Apr/12 14:53,can you paste running mvn -e ? 
MTOMCAT-136, Leigh Anderson,11/Apr/12 10:37,"[ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run (default-cli) on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run (default-cli) on project mantis-test-web-app: No such archiver: 'jar'.
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: No such archiver: 'jar'.
        at org.apache.tomcat.maven.plugin.tomcat7.run.RunMojo.createWebappLoader(RunMojo.java:277)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.createContext(AbstractRunMojo.java:415)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.startContainer(AbstractRunMojo.java:719)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.execute(AbstractRunMojo.java:353)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: org.apache.tomcat.maven.common.run.TomcatRunException: No such archiver: 'jar'.
        at org.apache.tomcat.maven.common.run.DefaultClassLoaderEntriesCalculator.calculateClassPathEntries(DefaultClassLoaderEntriesCalculator.java:184)
        at org.apache.tomcat.maven.plugin.tomcat7.run.RunMojo.createWebappLoader(RunMojo.java:232)
        ... 24 more
Caused by: org.codehaus.plexus.archiver.manager.NoSuchArchiverException: No such archiver: 'jar'.
        at org.codehaus.plexus.archiver.manager.DefaultArchiverManager.getUnArchiver(DefaultArchiverManager.java:77)
        at org.apache.tomcat.maven.common.run.DefaultClassLoaderEntriesCalculator.calculateClassPathEntries(DefaultClassLoaderEntriesCalculator.java:146)
        ... 25 more "
MTOMCAT-136, Olivier Lamy (*$^¨%`£),12/Apr/12 09:52,more details I need: do you have a dependency of type war in your project ? 
MTOMCAT-136, Olivier Lamy (*$^¨%`£),12/Apr/12 10:34,"should be fixed now.
SNAPSHOT deployed. "
MTOMCAT-136, Hudson,12/Apr/12 10:44,"Integrated in TomcatMavenPlugin-mvn3.x #127 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/127/)
    MTOMCAT-136 Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader fails with run goal
fix issue for tomcat6 plugin too. (Revision 1325195)
MTOMCAT-136 Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader fails with run goal (Revision 1325194)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1325195
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/AbstractRunMojo.java



olamy : http://svn.apache.org/viewvc/?view=rev&rev=1325194
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-138, Olivier Lamy (*$^¨%`£),11/Apr/12 12:04,artifactId has changed for tomcat7 see documentation added here http://svn.apache.org/viewvc?view=revision&revision=1324716 
MTOMCAT-138, Hudson,11/Apr/12 12:49,"Integrated in TomcatMavenPlugin-mvn3.x #126 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/126/)
    MTOMCAT-138 Cannot define the embedded Tomcat version
document how to adjust embedded tomcat version used with tomcat7 plugin. (Revision 1324715)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1324715
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/site/site.xml
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/site/site.xml

 "
MTOMCAT-138, Olivier Lamy (*$^¨%`£),11/Apr/12 16:55,SNAPSHOT doc deployed here http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/adjust-embedded-tomcat-version.html 
MTOMCAT-139, Morten Haraldsen,11/Apr/12 10:51,"AbstractRunMojo.java (trunk):

/**

	The static context
     *
	@parameter expression=""$
{maven.tomcat.staticContextPath}"" default-value=""/""
     * @since 2.0
     */
    private String staticContextPath;

    /**
     * The static context docroot base fully qualified path
     * if <code>null</code> static context won't be added
     *
     * @parameter expression=""${maven.tomcat.staticContextPath}
""
	@since 2.0
     */
    private String staticContextDocbase;



Looking at the above, the code shows parameter expression=""$
{maven.tomcat.staticContextPath}
 for both fields staticContextDocbase and staticContextPath.  "
MTOMCAT-139, Hudson,11/Apr/12 12:49,"Integrated in TomcatMavenPlugin-mvn3.x #126 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/126/)
    MTOMCAT-139 All static resources gives error 404 (Revision 1324717)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1324717
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/AbstractRunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-141, Olivier Lamy (*$^¨%`£),13/Apr/12 12:18,fixed r1325731. 
MTOMCAT-141, Hudson,13/Apr/12 12:25,"Integrated in TomcatMavenPlugin-mvn3.x #130 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/130/)
    MTOMCAT-141 Context root ""/"" not working for Tomcat 7 Run (Revision 1325731)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1325731
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-142, Dave Syer,13/Apr/12 14:55,"Great to see this is scheduled for 2.0.  Note also that the contextFile does not have a $
{maven.tomcat.*}
 expression that can be used to specify it on the command line. that would be useful if you are going to hack around in there a bit. "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),13/Apr/12 14:59,you mean applying filtering for the file with Maven sys props ? 
MTOMCAT-142, Dave Syer,13/Apr/12 15:28,"I guess that's what I mean, but I wouldn't have used those words.  For instance the path config can be provided on the command line with -Dtomcat.maven.path=/foo, but there is no corresponing setting for the contextFile (as can be seen here http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/run-mojo.html or in the plugin.xml). "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),13/Apr/12 15:34,"oh ok I see. I was talking about something different .
in your context file :
<Context path=""$
{foo.mypath}
""/>
So  you could use -Dfoo.mypath= "
MTOMCAT-142, Dave Syer,13/Apr/12 15:41,If I could do that it would be useful too.  But not as easy for you as just exposing an expression. 
MTOMCAT-142, Olivier Lamy (*$^¨%`£),13/Apr/12 15:44,Not a problem I already did that here http://maven.apache.org/shared/maven-filtering/ in a shared maven library  
MTOMCAT-142, Olivier Lamy (*$^¨%`£),13/Apr/12 17:09,"all done.
Have fun  "
MTOMCAT-142, Hudson,13/Apr/12 17:17,"Integrated in TomcatMavenPlugin-mvn3.x #131 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/131/)
    MTOMCAT-142 contextFile path=""..."" ignored when using tomcat7:run (Revision 1325842)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1325842
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-142, Dave Syer,14/Apr/12 12:27,"Olivier, you marked this as fixed, but it doesn't seem to work for me.  I grabbed a snapshot (20120413.171048-58) - maybe your change is not deployed yet?  Specifiying -Dmaven.tomcat.contextFile on the command line I can see that the value is picked up when I look at the console output, but it still completely ignores my context.xml.  Can you send me a context.xml that works to change the context root? "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),14/Apr/12 16:44,"weird.
Are you using an absolute or relative path in -Dmaven.tomcat.contextFile ?
I have something very simple based on http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-web/archiva-webapp/src/test/tomcat/tomcat-context-archiva.xml  "
MTOMCAT-142, Dave Syer,15/Apr/12 12:34,"That app has the same artifact I'd as the path in your context.xml, I think. What happens if you change the path in the context.xml? JIRA SUCKS ON AN IPHONE. "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),15/Apr/12 23:20,"If I use <Context path=""/foo""> the webapp is available on /foo  "
MTOMCAT-142, Dave Syer,16/Apr/12 08:54,"OK, yes that works.  But <Context path=""""/> does not work (and I think that's correct), and <Context path=""/""/> breaks in the same way as MTOMCAT-141. "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),16/Apr/12 19:35,oops my bad. Should be better now with r1326764. (SNAPSHOT deployed) 
MTOMCAT-142, Hudson,16/Apr/12 19:38,"Integrated in TomcatMavenPlugin-mvn3.x #136 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/136/)
    MTOMCAT-142 fix context file using / path (Revision 1326764)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1326764
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-142, Dave Syer,16/Apr/12 19:54,"Yes, that works now.  But only with path=""/"".  Is that right?  Or should it be path=""""? "
MTOMCAT-142, Olivier Lamy (*$^¨%`£),16/Apr/12 20:04,"sure only ""/"" works. if path="""" that's considered as no path defined. "
MTOMCAT-143, Olivier Lamy (*$^¨%`£),16/Apr/12 19:46,"contextFile not used with current trunk ? Sure ??
Any sample project to show this issue ? "
MTOMCAT-143, Raphaël Zürcher,17/Apr/12 05:22,"Here is my configuration in pom.xml :

<plugin>
						<groupId>org.apache.tomcat.maven</groupId>
						<artifactId>tomcat7-maven-plugin</artifactId>
						<version>2.0-SNAPSHOT</version>						
						<configuration>
							<domain>TomcatRunner</domain>
							<port>$
{app.port}
</port>
							<url>/manager</url>
							<path>$
{app.contexturl}
</path>
							<contextFile>$
{appdir}/context.xml</contextFile>
							<tomcatUsers>${appdir}
/tomcat-users.xml</tomcatUsers>
							<useTestClasspath>true</useTestClasspath>
							<contextReloadable>true</contextReloadable>
							<fork>$
{tomcat.fork}
</fork><!-- fork=true will stop tomcat after run -->
						</configuration>
						<executions>
							<execution>
								<id>tomcat-run</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>run-war-only</goal>
								</goals>
							</execution>
							<execution>
								<id>tomcat-shutdown</id>
								<phase>post-integration-test</phase>
								<goals>
									<goal>shutdown</goal>
								</goals>
							</execution>
						</executions>
						<dependencies>
							<dependency><!-- Servler 2.x not compatible with Tomcat 7 -->
								<groupId>javax.servlet</groupId>
								<artifactId>javax.servlet-api</artifactId>
								<version>3.0.1</version>
							</dependency>
							<dependency>
								<groupId>oracle.jdbc</groupId>
								<artifactId>ojdbc6</artifactId>
								<version>$
{oracle.version}
</version>
							</dependency>
						</dependencies>
					</plugin>

Since the middle of the last week, this doesn't work anymore. The definition of my users in the specified tomcat-users.xml is not used. "
MTOMCAT-143, Olivier Lamy (*$^¨%`£),23/Apr/12 17:26,"Should be fixed now.
Please test with last deployed SNAPSHOT "
MTOMCAT-143, Hudson,23/Apr/12 17:48,"Integrated in TomcatMavenPlugin-mvn3.x #140 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/140/)
    MTOMCAT-143 contextFile and tomcatUsers defined in pom.xml are not used with target tomcat7:run
configuring realm must be done before adding context. (Revision 1329339)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1329339
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/AbstractRunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-144, Olivier Lamy (*$^¨%`£),23/Apr/12 16:03,I need more informations. contextPath of the webapp and getServletContext().getResourcePaths(path) (value of path ??) 
MTOMCAT-144, Olivier Lamy (*$^¨%`£),27/Apr/12 10:15,please provide a sample project to reproduce. 
MTOMCAT-144, Hudson,30/Apr/12 13:32,"Integrated in TomcatMavenPlugin-mvn3.x #145 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/145/)
    MTOMCAT-144 resourcePaths returns null (Revision 1332183)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1332183
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-144, Olivier Lamy (*$^¨%`£),30/Apr/12 14:20,fixed and SNAPSHOT deployed. 
MTOMCAT-158, Robert Hollencamp,01/Jun/12 20:28,"This patch will serve files out of WAR overlays if they are not found in docBase.

It only applies to the tomcat6 component. If I receive positive feedback, I will work it into the tomcat7 component as well "
MTOMCAT-158, Olivier Lamy (*$^¨%`£),06/Jun/12 09:11,"So applying and quickly testing the patch, it cause issue (no backward compatible change) on a project I work (sorry I didn't get time to investigate more).
The project is located @ http://svn.apache.org/repos/asf/archiva/trunk/.
To reproduce just use :

svn co http://svn.apache.org/repos/asf/archiva/trunk/ archiva-trunk
cd archiva-trunk
mvn tomcat6:run -Pdev -Ptomcat -pl :archiva-webapp -am

 "
MTOMCAT-158, Thomas Broyer,09/Jun/12 01:19,"The patch also apparently doesn't work when loading the overlays from the reactor.

Olivier, given this issue, how are you developping Archiva with so many WAR overlays? Are you installing the overlays and restarting tomcat each time?
I see you have some configuration of the maven-dependency-plugin but it's with skip=true. "
MTOMCAT-158, Dave Syer,06/Sep/12 05:49,"I'd like to use this with tomcat7, please. "
MTOMCAT-166, Olivier Lamy (*$^¨%`£),01/Jul/12 07:25,dup of MTOMCAT-116 
MTOMCAT-168, Olivier Lamy (*$^¨%`£),30/Jul/12 17:50,"that must be fixed with 2.0-SNAPSHOT.
Can you try it ? see http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html "
MTOMCAT-168, Olivier Lamy (*$^¨%`£),11/Jan/13 15:28,please provide more infos. 
MTOMCAT-169, Josh Harness,20/Jul/12 16:39,"Patch to allow wars defined via ""webapps"" config to be deployed. 

Change from addContext to addWebapp. Please advise if this is correct and what the implications of changing are.  "
MTOMCAT-169, Olivier Lamy (*$^¨%`£),30/Jul/12 17:59,"Hi,
Your patch file doesn't provide any informations on which class has been modified.
Thanks "
MTOMCAT-169, Josh Harness,30/Jul/12 18:02,"Sorry about that. MTOMCAT-170 has the same problem, too. I'll generate a new patch shortly and then attach it to both tickets. "
MTOMCAT-169, Josh Harness,30/Jul/12 18:21,"patch generated from local development repository. Note that it will conflict with M170, but I wanted to have the patches stand by themselves. "
MTOMCAT-169, Olivier Lamy (*$^¨%`£),31/Jul/12 07:03,"patch applied with modification.
you must configure <asWebapp> for the additional webapp. "
MTOMCAT-169, Hudson,31/Jul/12 07:26,"Integrated in TomcatMavenPlugin-mvn3.x #185 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/185/)
    MTOMCAT-169 Unable to Deploy WAR Defined via ""webapps"" Declaration
Submitted by Josh Harness.
Patch modified to preserve backward comp. (Revision 1367432)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1367432
Files : 

	/tomcat/maven-plugin/trunk/common-tomcat-maven-plugin/src/main/java/org/apache/tomcat/maven/common/config/AbstractWebapp.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-170, Josh Harness,20/Jul/12 16:44,"Simply calls ""createWebappLoader"" in order to inherit the configuration of the main web application configuration. It would be ideal to be able to configure this on a case by case basis (per webapp) but this could be a reasonable start.  "
MTOMCAT-170, Olivier Lamy (*$^¨%`£),30/Jul/12 18:00,"patch file doesn't say which class has been patched.
Thanks "
MTOMCAT-170, Josh Harness,30/Jul/12 18:17,Patch file for issue - generated from local development repo.  
MTOMCAT-170, Olivier Lamy (*$^¨%`£),31/Jul/12 07:06,"patch applied.
Thanks ! "
MTOMCAT-170, Hudson,31/Jul/12 07:26,"Integrated in TomcatMavenPlugin-mvn3.x #185 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/185/)
    MTOMCAT-170 Unable to Specify Additional Classpath for WAR Defined via ""webapps"" Declaration
Submitted by Josh Harness. (Revision 1367433)

     Result = FAILURE
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1367433
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-173, Olivier Lamy (*$^¨%`£),15/Aug/12 21:48,"That's not a problem as classpath elements (the output directory of your dependency from reactors is added to the class path).
Which maven version are you using ? (I have to say that work only with maven 3). "
MTOMCAT-173, Arne Franken,16/Aug/12 07:21,"I'm using: 
Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100) "
MTOMCAT-173, Olivier Lamy (*$^¨%`£),16/Aug/12 21:50,"So should work fine.
Do you have any sample project to reproduce your isssue ? "
MTOMCAT-173, Arne Franken,17/Aug/12 10:05,"I just found what the problem is:

I created a new project using your archetype. Example directory structure:
dep-issue-api/
dep-issue-api-impl/
dep-issue-webapp/
dep-issue-webapp-exec/
dep-issue-webapp-it/

I usually build and start all modules from the projects root directory, in this case:
mvn -am -pl dep-issue-webapp clean install && mvn -pl dep-issue-webapp tomcat7:run

if I start the tomcat plugin this way, all direct dependencies of the dep-issue-webapp module will not be added to the classpath by Maven, the startup of the webapp will fail.

---------

If I instead do this:
mvn -am -pl dep-issue-webapp clean install
cd dep-issue-webapp
mvn tomcat7:run

Maven will add all direct dependencies to the classpath and the webapp will start correctly. "
MTOMCAT-173, Olivier Lamy (*$^¨%`£),18/Aug/12 21:36,"use:
mvn -pl :dep-issue-webapp -am tomcat7:run  "
MTOMCAT-173, Arne Franken,20/Aug/12 11:26,"mvn -pl :dep-issue-webapp -am tomcat7:run
that actually works, but it means that I would ALWAYS have to build the webapp and ALL dependencies before I can start it.

That may not be a problem in a small test project like the one the archetype creates, but this is a big problem in a project where I have lot of dependencies with (tens of) thousands of lines of code that have to be compiled over and over again if I just want to restart my webapp. "
MTOMCAT-173, Olivier Lamy (*$^¨%`£),20/Aug/12 12:24,"I miss you here ! 
Don't clean your projects and you won't rebuild/recompile everything.
use only mvn -pl :dep-issue-webapp tomcat7:run (without -am) if you don't want to rebuild/recompile everything. "
MTOMCAT-173, Arne Franken,20/Aug/12 15:50,"> Don't clean your projects
oops, of course you're right about that.

> use only mvn -pl :dep-issue-webapp tomcat7:run (without -am) if you don't want to rebuild/recompile everything.
if I don't use ""-am"", Tomcat will not have all necessary libraries in the classpath

if I use ""-am"" , Tomcat will have all necessary libraries in the classpath, but this won't work if any of my dependencies are also WAR artefacts which also have a Tomcat configuration since Maven will run the Tomcat plugin for the first module with plugin configuration in the dependency chain.
Also, dependencies will only be added to the classpath if they are compile time dependencies, whereas a WAR artefact only needs runtime dependencies if it doesn't contain code that needs compiling.

For me the only working workaround at the moment is to run ""mvn tomcat7:run"" directly in the directory of the webapp module. "
MTOMCAT-173, Loïc Guerrin,22/Oct/12 09:57,"Hello,

I have the same issue with tomcat7-maven-plugin:2.0. But it's during an integration test with junit. I have the structure below:

/
– project-domain
– project-webapp

The module project-domain isn't added to the classpath and the startup of the tomcat fails.
In the maven debug log I see too 'skip adding artifact project-domain as it's in reactors'.

In DefaultClassLoaderEntriesCalculator#calculateClassPathEntries at line 116, the method isInProjectReferences rejects the project-domain as it's in projectReferences of project-webapp.

So is it possible to add a cheap workaround like a configuration parameter 'forceIncludeProjectReferences' in order to add those project references to module classpath?

Thanks. "
MTOMCAT-173, Olivier Lamy (*$^¨%`£),13/Nov/12 16:41,fixed http://svn.apache.org/r1408507 
MTOMCAT-173, Arne Franken,14/Nov/12 15:56,I just built 2.1-SNAPSHOT locally and can confirm that the issue is fixed. Thanks! 
MTOMCAT-177, Olivier Lamy (*$^¨%`£),24/Sep/12 16:13,same with 2.0 released version ? 
MTOMCAT-177, Brad Larson,24/Sep/12 16:56,Yes same result 
MTOMCAT-177, Nicholas Albion,14/Aug/13 00:12,"I've generated a patch using git.
AbstractCatalinaMojo provides TomcatManager with proxy configuration from settings.xml "
MTOMCAT-177, Nicholas Albion,14/Aug/13 00:24,"Note - I've added a MavenSession component to AbstractCatalinaMojo - it would probably be possible to use wagonManager.getProxy(url.getProtocol()) as done here:

https://code.google.com/p/maven-external-dependency-plugin/issues/detail?id=15

...I'm not sure if that would be best practice, but it seems to be deprecated: 

http://maven.apache.org/ref/3.0.5/maven-compat/apidocs/org/apache/maven/artifact/manager/WagonManager.html "
MTOMCAT-177, Olivier Lamy (*$^¨%`£),16/Aug/13 11:56,"I wonder how you generate the patch?

Trying to apply it give me:

mb-olamy:tomcat-maven-plugin olamy$ git apply MTOMCAT-177.patch 
fatal: patch fragment without header at line 3: @@ -34,12 +34,14 @@ import org.apache.http.client.methods.HttpGet;
mb-olamy:tomcat-maven-plugin olamy$ patch -p0 < MTOMCAT-177.patch 
missing header for unified diff at line 3 of patch
(Stripping trailing CRs from patch.)
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------


 common-tomcat-maven-plugin/src/main/java/org/apache/tomcat/maven/common/deployer/TomcatManager.java


index e9e2b84..dc2be06 100644
--------------------------
File to patch: common-tomcat-maven-plugin/src/main/java/org/apache/tomcat/maven/common/deployer/TomcatManager.java 
patching file common-tomcat-maven-plugin/src/main/java/org/apache/tomcat/maven/common/deployer/TomcatManager.java
patch: **** malformed patch at line 72:




BTW I find this a bit odd

+    /**
+     * @param proxy
+     */
+    public void setProxy(Proxy proxy) {
+		if( this.proxy != proxy ) {
+			this.proxy = proxy;
+			if( httpClient != null ) 
{
+				applyProxy();
+			}
+		}
+	}
+    

why not a simple method configureProxy(Proxy proxy)?
WDYT?
 "
MTOMCAT-177, Basile Chandesris,21/Dec/13 21:19,"https://github.com/apache/tomcat-maven-plugin/pull/3

http://karaf.apache.org/manual/latest-2.3.x/developers-guide/github-contributions.html "
MTOMCAT-177, Olivier Lamy (*$^¨%`£),23/Jul/14 04:01,"pr merged.
Thanks! "
MTOMCAT-177, Hudson,23/Jul/14 04:16,"SUCCESS: Integrated in TomcatMavenPlugin-mvn3.x #278 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/278/)
Fix for MTOMCAT-177 - tomcat7:deploy ignores proxy settings (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1612752)

	/tomcat/maven-plugin/trunk/common-tomcat-maven-plugin/src/main/java/org/apache/tomcat/maven/common/deployer/TomcatManager.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/AbstractCatalinaMojo.java

 "
MTOMCAT-177, ASF GitHub Bot,06/Apr/16 03:43,"Github user nalbion closed the pull request at:

    https://github.com/apache/tomcat-maven-plugin/pull/3 "
MTOMCAT-178, Glen Mazza,11/Jan/13 13:37,"According to this JIRA it's not yet implemented with the Tomcat 7 plugin: https://issues.apache.org/jira/browse/MTOMCAT-189.  But I don't think you need additionalClasspathDirs for what you're configuring – I would suggest ""warSourceDirectory"" (http://tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/tomcat7-maven-plugin/run-mojo.html) if you want to reroute from src/main/webapp (put there by default to allow for real-time updating of css/jsp/javascript files) to the more authoritative target/webappname/ folder, which should have all the dependencies being defined in your pom.

Also, AFAIK additionalClasspathDirs is intended to be for additional classpaths for dependencies not declared in your WAR (or, probably in your case, in JARs declared as dependencies in your pom.xml), it's not meant as an overriding feature (""hey, ignore my foo.jar I put in the WAR and use this one instead!"").  It should be rarely needed.  Also, it doesn't have a concept of inheritance/precedence, you're at Tomcat's mercy of whatever it wants to do if you declare the same dependency in multiple places. "
MTOMCAT-178, Glen Mazza,11/Jan/13 13:47,"Oops, nm, we do have additionalClasspathDirs already in tomcat 7 plugin (http://tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/tomcat7-maven-plugin/run-mojo.html).  MTOMCAT-189 is over ""additionalClassesDirs"" (unsure if that's the same thing.) "
MTOMCAT-178, Andrii Rubtsov,22/Jul/13 13:00,"Any update on this, guys? As far far as I can see, it does not indeed seem to be used. "
MTOMCAT-178, Olivier Lamy (*$^¨%`£),01/Nov/13 10:39,"<additionalClasspathDir>$
{project.build.directory}/../../../mits-common-parent/common-ui/src/main/resource</additionalClasspathDir>                                      <additionalClasspathDir>${project.build.directory}
/../src/main/webapp</additionalClasspathDir> 

So you are using files from other projects?
Are they dependencies of the webapp you are running. In this case, yes jar dependencies win. "
MTOMCAT-183, Glen Mazza,11/Jan/13 13:13,"I'm not sure what version you're using that is causing this error, you say it's OK with 2.0-SNAPSHOT, but when you write at the top ""when run tomcat7:run"", which version of tomcat7:run are you running (2.0? 2.1-SNAPSHOT?) that is causing this error?  The text seems to say you're using 2.1-SNAPSHOT, but I don't know if the version you're using is 2.1-SNAPSHOT or another version erroneously calling the 2.1-SNAPSHOT version.

I was running both tomcat7:run and :run-war yesterday w/2.1-SNAPSHOT (which has had several changes since last October) with no problem.  I use JDK 7 though.  I'm guessing the problem might be with your JDK (a JBoss user had a similar problem: https://community.jboss.org/thread/154156?_sscc=t).  Could you try again with 2.1-SNAPSHOT and confirm it's still happening with you? "
MTOMCAT-183, Olivier Lamy (*$^¨%`£),04/Nov/13 01:47,no info from user 
MTOMCAT-184, Olivier Lamy (*$^¨%`£),26/Oct/12 15:21,"I miss you a bit here. We don't do any web.xml merging here.
Do you have any sample project to demonstrate your trouble ? "
MTOMCAT-184, Dennis Homann,26/Oct/12 18:06,"Sorry, I did not realize my config was screwed and thought it was the plugin. "
MTOMCAT-185, Olivier Lamy (*$^¨%`£),14/Nov/12 13:37,"Yup I agree it's a better phase especially for your use case 
So I change that.
NOTE you can test snapshot following instructions from here: http://tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/snapshot-test.html "
MTOMCAT-185, Jiri Peinlich,14/Nov/12 13:45,Thank you . 
MTOMCAT-185, Jiri Peinlich,14/Nov/12 14:06,"I can confirm, that it is fixed in the snapshot. Thank you. "
MTOMCAT-185, Hudson,14/Nov/12 14:07,"Integrated in TomcatMavenPlugin-mvn3.x #219 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/219/)
    MTOMCAT-185 change phase for tomcat6/7:run to process-classes (Revision 1409194)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1409194
Files : 

	/tomcat/maven-plugin/trunk/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/RunMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/RunMojo.java

 "
MTOMCAT-185, Olivier Lamy (*$^¨%`£),07/Jan/13 21:48,no idea why the issue was reopened. 
MTOMCAT-186, Konstantin Kolinko,02/Dec/12 21:26,"The shutdown hook used by o.a.c.startup.Catalina is Catalina$CatalinaShutdownHook.  Maybe it could be generalized, or a similar class should be added to be used with o.a.c.startup.Tomcat.


If someone is going to create a copy of the shutdown hook class, maybe I should explain one implementation detail:

Note that the logging subsystem installs its own shutdown hook as well.  When JVM shuts down, it starts all hooks in parallel without any order, so there is a risk that some log messages will be lost as the logging system will be shut down too early.

This issue is already solved in Catalina$CatalinaShutdownHook, but the solution works only when Tomcat's JULI ClassLoaderLogManager is used.  It does not work with plain java.util.logging.LogManager which I think is used when running a JAR file.

I see that Tomcat7Runner.installLogger() may install ""org.slf4j.bridge.SLF4JBridgeHandler"". I do not know how to deal with that one either.


The solution works like the following:

First, it should be noted that the following 3 hooks are installed:
a) java.util.logging.LogManager$Cleaner
b) org.apache.juli.ClassLoaderLogManager$Cleaner
c) org.apache.catalina.startup.Catalina$CatalinaShutdownHook

To ensure that the logging subsystem is shutdown by CatalinaShutdownHook only, the following is used:

1. ""a)"" is dealt with in ClassLoaderLogManager.reset() where it ignores a call from LogManager$Cleaner
2. ""b)"" is dealt with in Catalina.start() where it calls ClassLoaderLogManager.setUseShutdownHook(false) after installing its own shutdown hook
3.  Catalina$CatalinaShutdownHook.run() calls ClassLoaderLogManager.shutdown()

http://svn.apache.org/viewvc?view=revision&revision=910974
http://svn.apache.org/viewvc?view=revision&revision=918885 "
MTOMCAT-186, Hudson,31/Jan/13 13:16,"Integrated in TomcatMavenPlugin-mvn3.x #231 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/231/)
    MTOMCAT-186 Closing executable JAR does not call ServletContextListener.contextDestroyed() (Revision 1440948)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1440948
Files : 

	/tomcat/maven-plugin/trunk/pom.xml
	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java

 "
MTOMCAT-186, Olivier Lamy (*$^¨%`£),31/Jan/13 13:17,"Thanks Konstantin Kolinko for the advice.
It's now implemented see http://svn.apache.org/r1440948
SNAPSHOT deployed. "
MTOMCAT-186, Tomasz Nurkiewicz,26/Mar/13 12:56,"Thank you for the fix, I confirm, 2.1 works as expected. It's actually a Spring application that shuts down gracefully. "
MTOMCAT-193, Glen Mazza,09/Jan/13 20:43,Duplicate of MTOMCAT-119 
MTOMCAT-197, Olivier Lamy (*$^¨%`£),09/Jan/13 17:25,fixed http://svn.apache.org/r1430966 
MTOMCAT-197, Hudson,30/Jan/13 10:50,"Integrated in TomcatMavenPlugin-mvn3.x #227 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/227/)
    MTOMCAT-197 tomcat7:undeploy goal not ignoring non-war projects (Revision 1430966)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1430966
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/deploy/UndeployMojo.java

 "
MTOMCAT-198, Olivier Lamy (*$^¨%`£),09/Jan/13 17:45,"fixed http://svn.apache.org/r1430970
Thanks ! "
MTOMCAT-198, Hudson,30/Jan/13 10:50,"Integrated in TomcatMavenPlugin-mvn3.x #227 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/227/)
    MTOMCAT-198 Fix base classes for redeploy and redeploy-only goals (Revision 1430970)

     Result = SUCCESS
olamy : http://svn.apache.org/viewvc/?view=rev&rev=1430970
Files : 

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/deploy/RedeployMojo.java
	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/deploy/RedeployOnlyMojo.java

 "
MTOMCAT-205, Laurent Van Basselaere,01/Feb/13 12:42,"Please find attached a simple maven project that reproduces this issue.
Unzip in its own directory then run:
mvn clean verify

Then, visit 
http://localhost:8180/bug/ -> It works
http://localhost:8280/bug/ -> context not loaded "
MTOMCAT-205, Olivier Lamy (*$^¨%`£),02/Feb/13 22:07,"I think (probably someone else will confirm) it's not possible to have 2 different naming context in the same classloader.
Which cause the issue here.
In the log you have something like:

2 f?vr. 2013 22:48:38 org.apache.catalina.core.NamingContextListener lifecycleEvent
GRAVE: Creation of the naming context failed: javax.naming.OperationNotSupportedException: Context is read only

 "
MTOMCAT-210, Olivier Lamy (*$^¨%`£),01/Nov/13 05:49,"any project to reproduce?
Because per default dependencies with test scope are not included in the classloader "
MTOMCAT-211, Petr Novak,28/Feb/13 20:34,I attached the problematic project. 
MTOMCAT-211, Petr Novak,28/Feb/13 21:03,"I tried some changes in configuration and detect where is the problem.
The exception is thrown when the project pom.xml file contains the configuration of <path>...</path>  and the context (path) has more than one level.
So  <path>/ctx</path>   is OK and the JAR could be executed.
But <path>/ctx/test</path>  (2-level path) has problem,  the included war-file is not extracted from encapsulating jar. "
MTOMCAT-211, Hudson,06/Nov/13 09:59,"FAILURE: Integrated in TomcatMavenPlugin-mvn3.x #268 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/268/)
MTOMCAT-211 The .war file is not extracted from executable war (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1539209)

	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java

 "
MTOMCAT-211, Hudson,08/Nov/13 15:19,"FAILURE: Integrated in TomcatMavenPlugin-mvn3.x #271 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/271/)
https://issues.apache.org/jira/browse/MTOMCAT-211
Followup to r1539920
Introduce a local variable to cache the object created by expandFile.getParentFile() call. (kkolinko: http://svn.apache.org/viewvc/?view=rev&rev=1539956)

	/tomcat/maven-plugin/trunk/tomcat7-war-runner/src/main/java/org/apache/tomcat/maven/runner/Tomcat7Runner.java

 "
MTOMCAT-211, Alexander Pechersky,27/Nov/13 19:00,"I'm still encountering the issue:

C:\temp\abc>java -jar abc-web-1.14-SNAPSHOT-exec-war.jar -X
use extractDirectory:.extract
populateWebAppWarPerContext warValue:abc.war|/abc
populateWebAppWarPerContext contextValue/warFileName:/abc/abc.war
webappWarPerContext entry key/value: /abc/abc.war
expand to file:.extract\webapps\abc.war
Exception in thread ""main"" java.lang.Exception: FATAL: impossible to create directories:.extract\webapps
        at org.apache.tomcat.maven.runner.Tomcat7Runner.extract(Tomcat7Runner.java:586)
        at org.apache.tomcat.maven.runner.Tomcat7Runner.run(Tomcat7Runner.java:204)
        at org.apache.tomcat.maven.runner.Tomcat7RunnerCli.main(Tomcat7RunnerCli.java:212) "
MTOMCAT-211, Konstantin Kolinko,27/Nov/13 19:15,"This has been spotted and fixed during code review a day after tagging 2.2 (""Re: r1539209"" thread on dev@)
The fix will be in 2.3
http://svn.apache.org/r1539920 "
MTOMCAT-211, Tim Astle,28/Nov/13 15:18,Should the fix version of this issue be updated to 2.3?  Or is this issue separate of the one Konstantin Kolinko had mentioned above?  (Just seeking clarification on the thread.) 
MTOMCAT-211, Alexander Pechersky,28/Nov/13 17:34,"It certainly appears to be the same issue. When do you guys plan to release 2.3 ? At the moment, ""exec-war"" goal in 2.2 is completely unusable because of this problem. "
MTOMCAT-211, Watanabe,24/Jan/14 15:20,"me too.
So, I am using 2.3-SNAPSHOT that run good.
When to release official version ? "
MTOMCAT-211, Isaac Johnson,31/Mar/15 16:32,Will there be an official 2.3 out soon? We require this fix for our build but cannot depend on SNAPSHOT plugins.  Thank you 
MTOMCAT-211, Magnus Skoglund,29/Mar/16 06:38,What are the plans for a release 2.3 of tomcat-maven-plugin? 
MTOMCAT-214, Tim Astle,07/Mar/13 21:05,"I think this is all needs to be changed.  Running a local build now and stepping out, will add another note when confirmed. "
MTOMCAT-214, Tim Astle,07/Mar/13 23:41,"Build passed, looks good.  If this could be included in the next release (2.2), that'd be great. "
MTOMCAT-214, Olivier Lamy (*$^¨%`£),24/Mar/13 10:18,"applied.
Thanks! "
MTOMCAT-215, Tim Astle,11/Mar/13 19:57,"This patch prevents MANIFEST.MF files from being included in the final package.

Do you know of a better way to do this?  I kinda peeked around the commons compression API and JAR API, but nothing stood out. "
MTOMCAT-215, Tim Astle,11/Mar/13 20:06,"There are also multiple LICENSE and NOTICE files under the META-INF, but I was less concerned about those as I can't see those causing any potential technical issues.  Worst case, on unzip, those files are overwritten or renamed. "
MTOMCAT-215, Olivier Lamy (*$^¨%`£),24/Mar/13 10:18,"applied.
Thanks! "
MTOMCAT-216, Jan Zelenka,14/Mar/13 10:59,I can create simple repro if it helps 
MTOMCAT-216, Olivier Lamy (*$^¨%`£),27/Mar/13 11:12,"yes please.
BTW I think you must use something like: mvn install tomcat7:run  "
MTOMCAT-216, Henri Tremblay,26/Apr/13 10:19,"Same issue here. The overlay seems to be ignored.

mvn install tomcat7:run doesn't fix it.

I have and example here. "
MTOMCAT-216, Henri Tremblay,26/Apr/13 10:21,"Just launch http://localhost:8080/overlay-webapp

When launched from the tomcat7 plugin, you get a jsp compilation error.

If the war is deployed manually in tomcat, it works perfectly "
MTOMCAT-216, Jan Zelenka,26/Apr/13 13:40,"I uploaded repro.zip, 
project has flat (eclipse friendly) directory structure:
project/  - contains parent pom
mainWebapp/ - main webapp
overlayWebapp/ - overlayed webapp

Now, from project/ directory:
mvn tomcat7:run fails with above mentioned exeption
mvn install tomcat7:run does not fail, but overlay does not happen (overlay.html is not accesible)

Overlay itself is OK, (create war with mvn package, then deploy war to standalone tomcat work OK), only tomcat7 plugin does not handle it.

 "
MTOMCAT-216, Petar Tahchiev,21/Jun/13 15:58,"Actually I had the same problem,
before I add different context path declarations

<contextPath></contextPath>

to my webapps definition. "
MTOMCAT-216, Petar Tahchiev,16/Jul/13 12:13,"No, sorry.. I still see the exception even with the contextPath  "
MTOMCAT-216, Vitalii Tymchyshyn,26/Sep/13 16:38,"Actually I don't see overlay support. According to the source (v2.1) of DefaultClassLoaderEntriesCalculator:

                // in case of war dependency we must add /WEB-INF/lib/*.jar in entries and WEB-INF/classes

So any static overlay resources will be ignored "
MTOMCAT-216, Danny Trunk,09/Oct/14 16:37,"I'm facing the same with version 2.2
This is still an issue since 1,5 years. "
MTOMCAT-216, Danny Trunk,10/Oct/14 10:06,"I've made another minimal repro which is a complete eclipse workspace.

Try ""Run As > Maven build"" on the base project and then call: http://localhost:8080/base

Then do the same on the demo project which will fail. "
MTOMCAT-219, Olivier Lamy (*$^¨%`£),04/Nov/13 01:46,"
Use:

        <webapp> 
          <groupId>com.example</groupId> 
          <artifactId>myApplication</artifactId> 
          <version>1.0</version> 
          <type>war</type>
          <asWebapp>true</asWebapp> 
        </webapp> "
MTOMCAT-220, Aivaras Ruzveltas,18/Apr/13 14:21,Using different ports for different modules does not help either. In that case second application fails with some application specific exception. 
MTOMCAT-220, Olivier Lamy (*$^¨%`£),04/Nov/13 01:34,are you triggering shutdown mojo at the end of your integration tests? 
MTOMCAT-221, Aaron Pelton,05/Aug/13 15:47,"Has there been any progress on this? I too am encountering this issue where our environment requires client-auth, and therefore the tomcat7-maven-plugin must be capable of doing a deploy/redeploy goal with a -Djavax.net.ssl.keyStore argument passed to maven.  With ssl debug on, I see that the keystore is never accessed.  I'm currently using Maven 3.0.4 and saw another post about this maven version having issues with SSL arguments.  Chris mentions above that 3.0.5 did not work either.  I see that 3.1.0 is now available, however, it says it's using wagon 2.4 which Maven 3.0.5 was doing.  I see that this plugin is using Apach HTTP Client under the covers. I don't have much experience with that library, but from what I saw in the source code, it has it's own SocketFactory implementation different from the default one that ships with Java. Additionally, it appears by default it does not respect Java System Properties. There is a different constructor to take Keystore information which may need to be called out explicitly? Or, somewhere before TomcatManager enters into the HTTPClient code, you may need to provide some flag to use the SSLSocketFactory.createSystemSSLContext() rather than the default createSSLContext()?  For the time being, as a work around, I can only think to have Jenkins run a shell script to SCP over the new artifact, and then SSH and move it to the tomcat webapps folder.

Using JDK 1.7 and CentOS x64 "
MTOMCAT-221, Elliott Bradshaw,25/Aug/14 12:25,"I realize that this is a bit old, but I'm still experiencing the same issue.  Can anybody comment on this or suggest a workaround?

Thanks! "
MTOMCAT-225, Konstantin Kolinko,13/Jun/13 12:04,"> According to the docs, the default values of ""http://localhost:8080/manager/html""
> should be used with tomcat7:deploy and tomcat7:deploy-only. However, this will consistently return 403. 

What documentation? Please be specific.
What are the URLs of incorrect pages?


Searching through the sources, the only file with such an URL that I can find is
\tomcat6-maven-plugin\src\site\apt\examples\deployment-tomcat7.apt.vm
which
 a) is not linked anywhere, so you should not have seen it.
 b) is offtopic in the scope of ""tomcat6"" plugin, so I think it is a good time to remove if.


Anyway, the Manager GUI URLs (/manager/html) will not work for an automated tool
neither in Tomcat 7 nor in recent versions of Tomcat 6
thanks to CSRF protection for those URLs in the Manager Web Application. "
MTOMCAT-225, Dennis Lundberg,30/Oct/14 16:06,"The text appears in two places:

	The usage page for tomcat7-maven-plugin http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/usage.html
	The Mojo pages, for example http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/deploy-mojo.html#url



Both was fixed in version 2.1. "
MTOMCAT-227, Tony Chemit,12/Jun/13 14:44,"To see the problem just do a 
mvn package "
MTOMCAT-227, Neale Upstone,15/Oct/13 15:19,"Hi Tony,

I just spotted this one.  The following option added to the configuration will sort out your problem:

<useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader> "
MTOMCAT-227, Tony Chemit,15/Oct/13 15:32,"Awesome 

thanks Neale. "
MTOMCAT-227, Brendan Le Ny,17/Jan/14 15:32,"Hi Neale (Tony coworker speaking), 

<useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader> doesn't solve the issue.

It seems that the classpaths are not separated.

I've created a project to show the whole issue. The problem appeared when i added shiro as a dependency to my project. Shiro depends on slf4j-api. I also use commons-codec 1.8. My project use log4j to log and slf4j-jcl to gather slf4j logs (so i will get Shiro's log). Log4j and slf4j-jcl are in scope runtime.

Here is the whole thing:

	if I do a tomcat:run, the application breaks, because tomcat-plugin put jcl-over-slf4j in classpath and slf4j initialization fail because you can't have both jcl-over-slf4j and slf4j-jcl in the same classpath. The application works when deployed in a tomcat, but it doesn't work in tomcat:run. That's the exact problem Tony raised.
	If I add <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader> in plugin config, it solve the issue because jcl-over-slf4j and slf4j-jcl
	But ! it raise another issue: in my application, I use commons-codec 1.8 and when the time come when the class is loaded, I get a linkage error saying that DigestUtils#sha1hex method doesn't exists. It exists in commons-codec 1.8 but not in commons-codec version declared in tomcat-plugin. So it seems that even with useSeparateTomcatClassLoader=true, the actual classpath of the application running in tomcat7:run is not the same that the one given by mvn package, ie with the exact dependencies and exact version defined in the project's pom.



For now, the only workaround i've found is to leave useSeparateTomcatClassLoader = false and add a maven profile to put  slf4j-jcl in scope runtime, I use the profile only when doing a tomcat7:run. I don't know if useSeparateTomcatClassLoader = true is buggy or what occurs actually but it's sure that the application's classpath is not sane. "
MTOMCAT-227, Tony Chemit,17/Jan/14 15:37,We have new stories to tell you guys... 
MTOMCAT-227, Olivier Lamy (*$^¨%`£),19/Jan/14 22:45,please clone this jira in a new one and do not reopen. 
MTOMCAT-232, Olivier Lamy (*$^¨%`£),01/Nov/13 10:35,please provide a sample project as I cannot reproduce. 
MTOMCAT-233, Olivier Lamy (*$^¨%`£),06/Nov/13 01:33,"fixed using last maven site plugin.
So will be available with 2.2 version. "
MTOMCAT-237, Olivier Lamy (*$^¨%`£),06/Sep/13 03:15,"??
I missed you here.
Can I have a sample?
I can use something like that without issues


<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat7-maven-plugin</artifactId>
  <configuration>
    <systemProperties>
      <appserver.base>${archivaAppServerBase}</appserver.base>
      <appserver.home>${archivaAppServerBase}</appserver.home>
      <derby.system.home>${archivaAppServerBase}/logs</derby.system.home>
      <java.io.tmpdir>${project.build.directory}</java.io.tmpdir>
     </systemProperties>
  </configuration>

 "
MTOMCAT-237, Andreas Christoforides,14/Mar/14 18:24,"I was mistaken in my case. We have properties that  were added into the Maven model during the install lifecycle. The plugin does invoke the install lifecycle because it runs the process-classes phase.However, the actual run goal runs in its own lifecycle and therefore those properties are never added. 

The only way I found around that was to use the properties-maven-plugin and add the properties I needed as system properties thus allowing the Tomcat maven plugin to resolve them,   "
MTOMCAT-238, Michal Franc,06/Sep/13 14:50,"[ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run (default-cli) on project web_cps: Execution default-cli of goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run failed: addChild:  Child name '/' is not unique -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run (default-cli) on project web_cps: Execution default-cli of goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run failed: addChild:  Child name '/' is not unique
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:224)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:318)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:153)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:555)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:414)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:357)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run failed: addChild:  Child
name '/' is not unique
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:115)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
        ... 19 more
Caused by: java.lang.IllegalArgumentException: addChild:  Child name '/' is not unique
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:887)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.createStaticContext(AbstractRunMojo.java:1354)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.startContainer(AbstractRunMojo.java:1020)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.execute(AbstractRunMojo.java:512)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:106)
        ... 20 more "
MTOMCAT-238, Olivier Lamy (*$^¨%`£),01/Nov/13 10:53,test project please. 
MTOMCAT-238, Laurent GARCIA,22/Nov/13 13:59,"Same problem here, and in any configuration.
If you look at the code you will see that the staic context is added twice in AbstractRunMojo.createStaticContext() :

Context staticContext = container.addContext( staticContextPath, staticContextDocbase );


which will execute the code in Tomcat.java (tomcat-embed-core-7.0.47.jar)


addContext {
...
        if (host == null) {
            getHost().addChild(ctx);
        } else {
            host.addChild(ctx);
        }
}



And then  in AbstractRunMojo.createStaticContext() :

host.addChild( staticContext );



My guess is that the last line shouldn't be there.
With tomcat6-maven-plugin, everything works.

If you can patch it, I'll be very grateful  "
MTOMCAT-238, Laurent GARCIA,25/Nov/13 15:34,"Here my configuration if you need it :


<plugin>
	<groupId>org.apache.tomcat.maven</groupId>
	<artifactId>tomcat7-maven-plugin</artifactId>
	<version>2.2</version>
	<configuration>
		<uriEncoding>UTF-8</uriEncoding>
		<staticContextDocbase>${tomcat.staticContextDocbase}</staticContextDocbase>
		<staticContextPath>/static</staticContextPath> 
	</configuration>
</plugin>

<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-compiler-plugin</artifactId>
	<version>2.5.1</version>
	<configuration>
		<source>1.7</source>
		<target>1.7</target>
	</configuration>
</plugin>

<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-resources-plugin</artifactId>
	<version>2.5</version>
</plugin>

<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-source-plugin</artifactId>
	<version>2.2.1</version>
</plugin>



But I also tried with tomcat7-maven-plugin 2.1 and 2.0 "
MTOMCAT-238, Maciej Nyczka,08/Jan/14 16:54,The same thing here. Affects also 2.2 version 
MTOMCAT-238, Laurent GARCIA,18/Feb/14 15:28,"I added to this jira a patch, which is exactly what I said and works fine for me (just comment the addChild).
An official release would be really appreciated. "
MTOMCAT-238, Olivier Lamy (*$^¨%`£),18/Feb/14 22:06,Laurent GARCIA If you want your patch integrated you must provide a sources patch not a binary form 
MTOMCAT-238, Laurent GARCIA,19/Feb/14 13:18,"Like I said, it's juste a line in comment, but I add the source file too.
The binary file is usefull if you really need this to works quickly (just overwrite the one in your personal repo in .m2\repository\org\apache\tomcat\maven\tomcat7-maven-plugin\2.2) "
MTOMCAT-238, Sylvain Guillopé,25/Apr/14 21:35,"Hi,

I've attached the diff file based on Laurent Garcia's fix. Could you please have this patch integrated in the next version?
Our team recently switched to using this plugin but we had to manually override the jar as per Laurent's suggestion. It's helpful but not ideal.

Thanks "
MTOMCAT-238, Olivier Lamy (*$^¨%`£),28/Apr/14 00:07,"applied.
Thanks for the patch. "
MTOMCAT-238, Hudson,09/May/14 18:25,"SUCCESS: Integrated in TomcatMavenPlugin-mvn3.x #275 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/275/)
MTOMCAT-238 Parameter staticContextDocbase cant be used
Submitted by Sylvain Guillopé (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1590540)

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-238, Konstantin Welke,27/Aug/15 13:27,"I've recently encountered this bug and there's also one stackoverflow question related to this bug: http://stackoverflow.com/questions/17674519/tomcat-7-maven-plugin-multiple-context

I'm switched to using 2.3-SNAPSHOT to have a version that works, but I'd feel more confident if I could use a stable version.

When do you think the next version (2.3 or 3.0) will be released? (or 2.2.1 with this bugfix?)

Thanks in advance!

(if this is the wrong place to ask this, please direct me to the right place) "
MTOMCAT-249, Gilberto C Andrade,25/Nov/13 20:31,Just run mvn clean tomcat7:run and hit the browser with http://localhost:8080/MTOMCAT-249/ 
MTOMCAT-249, Olivier Lamy (*$^¨%`£),25/Nov/13 22:13,With 2.2 ? 
MTOMCAT-249, Gilberto C Andrade,26/Nov/13 16:33,Not made ​​any difference. Attached 2.2 log  for both tomcat6 and tomcat7. 
MTOMCAT-255, Tamal Kanti Nath,04/Feb/14 12:07,"Hi, I am also getting the same problem. As a work-around, I am using: tomcat:run-war instead of tomcat:run. "
MTOMCAT-255, Gilberto C Andrade,04/Feb/14 16:16,"Hi, Tamal! That's the point of the issue. Have you seen the title? "
MTOMCAT-255, Tamal Kanti Nath,07/Feb/14 10:03,"Gilberto, yes, both of us are facing the same problem.

I think classpath scanning is not working at all for tomcat7:run goal. That's why annotations (@ManagedBean, @FacesValidator, @FacesConverter etc.) are not working. The root cause can be in JSF side as well. "
MTOMCAT-255, Tamal Kanti Nath,07/Feb/14 12:05,"The root cause is: in tomcat7:run goal the resource path starts from /src/main/webapp and /WEB-INF/classes/ directory do not contain the compiled classes. It can easily be tested in a servlet:

request.getServletContext().getResourcePaths(""/WEB-INF/classes/"");

In tomcat7:run goal, the above code returns null. But In tomcat7:run-war goal, the above code returns packaged classes. If somebody can change ServletContext.getResourcePaths() to pick /target/classes/ for /WEB-INF/classes/, then the problem will be resolved. "
MTOMCAT-255, Manuel Pereira González,23/Jul/14 15:22,"Hi, if this can help you, I finally solved this issue modifying method createContext of AbstractRunMojo.java, just before ""return context;"", you can add those lines to solve the problem (Adding an alias to the standard context for ""WEB-INF/classes"" pointing to the target directory):

        if(context instanceof StandardContext) 
{
            ((StandardContext) context).setAddWebinfClassesResources(true);
            ((StandardContext) context).setAliases(
            ""/WEB-INF/classes="" + project.getBuild().getOutputDirectory());
        } "
MTOMCAT-255, Olivier Lamy (*$^¨%`£),27/Feb/15 03:19,maybe you could provide a patch  
MTOMCAT-255, Gilberto C Andrade,27/Feb/15 20:53,All credit goes to Manuel 
MTOMCAT-255, Hudson,17/Feb/16 04:16,"FAILURE: Integrated in TomcatMavenPlugin-mvn3.x-windows #7 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x-windows/7/)
MTOMCAT-255 (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1730784)

	tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-255, Hudson,17/Feb/16 04:45,"FAILURE: Integrated in TomcatMavenPlugin-mvn3.x #291 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/291/)
MTOMCAT-255 (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1730784)

	tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractRunMojo.java

 "
MTOMCAT-257, Brendan Le Ny,20/Jan/14 17:30,"<useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader> doesn't solve the issue.

It seems that the classpaths are not separated.

I've created a project to show the whole issue. The problem appeared when i added shiro as a dependency to my project. Shiro depends on slf4j-api. I also use commons-codec 1.8. My project use log4j to log and slf4j-jcl to gather slf4j logs (so i will get Shiro's log). Log4j and slf4j-jcl are in scope runtime.

Here is the whole thing:

    if I do a tomcat:run, the application breaks, because tomcat-plugin put jcl-over-slf4j in classpath and slf4j initialization fail because you can't have both jcl-over-slf4j and slf4j-jcl in the same classpath. The application works when deployed in a tomcat, but it doesn't work in tomcat:run. That's the exact problem Tony raised.
    If I add <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader> in plugin config, it solve the issue because jcl-over-slf4j and slf4j-jcl
    But ! it raise another issue: in my application, I use commons-codec 1.8 and when the time come when the class is loaded, I get a linkage error saying that DigestUtils#sha1hex method doesn't exists. It exists in commons-codec 1.8 but not in commons-codec version declared in tomcat-plugin. So it seems that even with useSeparateTomcatClassLoader=true, the actual classpath of the application running in tomcat7:run is not the same that the one given by mvn package, ie with the exact dependencies and exact version defined in the project's pom.

For now, the only workaround i've found is to leave useSeparateTomcatClassLoader = false and add a maven profile to put slf4j-jcl in scope runtime, I use the profile only when doing a tomcat7:run. I don't know if useSeparateTomcatClassLoader = true is buggy or what occurs actually but it's sure that the application's classpath is not sane. "
MTOMCAT-257, Andreas Christoforides,22/Jan/14 18:52,"I am having a similar issue but with the Google Guava dependency (version 15.0). 

Setup:

	useSeparateTomcatClassLoader is enabled
	Google Guava version in dependency management is 15.0
	Using tomcat6:run



I was getting a NoSuchMethodException when using a Google Guava method that was added in version 15.0. I enabled the -verbose:class flag and I noticed that all the Google Guava classes for my webapp were being loaded from version 10.0.1 instead of version 15.0.

The problem does NOT occur when running the WAR in a standalone Tomcat instance.

Google Guava version 10.0.1 is actually one of the dependencies of the Maven Tomcat plugin itself. It seems that dependencies from the plugin are mixed with the webapp even if the setting useSeparateTomcatClassLoader is enabled. "
MTOMCAT-257, Andreas Christoforides,06/Jun/14 04:02,"I ran into another case of this issue so I looked at the code to see how the ""useSeparateTomcatClassLoader"" parameter is used.

It seems the issue was introduced by this change:
http://svn.apache.org/viewvc/tomcat/maven-plugin/tags/tomcat-maven-plugin-2.0/tomcat6-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat6/AbstractRunMojo.java?r1=1297072&r2=1297073&

All dependencies of the plugin are added to the separate Tomcat classoader. 

It certain cases that is desirable as described in:
https://issues.apache.org/jira/browse/MTOMCAT-122

In other cases, it makes the plugin unusable since it brings in unwanted libraries like slf4j and google guava. "
MTOMCAT-258, Mark Thomas,07/Feb/14 20:59,"JIra is not a support forum. Use the Apache Tomcat user's mailing list.

FYI, the same OP also contacted security@.a.o about this as well. That too was bounced. "
MTOMCAT-258, Shailesh,07/Feb/14 21:04,"Can you please let me know whom should I contact for this issue? Please give me the email add of support group of tomcat if u have

Regards,
Shailesh Jain
Suncor MW
 "
MTOMCAT-262, Dennis Lundberg,30/Oct/14 15:02,"Checks for this was added in an integration test in r1382739

Is this still a problem in version 2.2? "
MTOMCAT-262, jieryn,30/Oct/14 15:10,"Thanks for adding those tests. I actually migrated to Apache TomEE, and I am no longer in a position to validate this on a recent tomcat-m-p; sorry. "
MTOMCAT-266, Olivier Lamy (*$^¨%`£),09/Apr/14 12:23,"Are you using maven 3.1+ ?
If yes it's an issue with maven when running shutdownhook. BTW your build is success "
MTOMCAT-266, M. R.,09/Apr/14 16:16,"I'm using 3.2.1.
Do you have a suggestion about which version I can downgrade to, so I can do some tests?

Just to be clear, the crash happens when I do ""mvn tomcat7:run"" (I see I didn't point that out in my original message). "
MTOMCAT-266, Olivier Lamy (*$^¨%`£),17/Apr/14 05:55,"NOTE: the server doesn't crash but stop because of the fork attribute to true.
So if you want to simply browse just use fork to false.
fork to true is used for integration test as starting a tomcat then running selenium tests or something else then stop it.
I don't understand what is your goal here? "
MTOMCAT-266, Constantino Cronemberger,03/Jun/15 13:51,"It looks like this is similar to MTOMCAT-83.

I understand fork is used for integration tests, so it will not really cover what I really need and maybe what the reporter wants as well.

In my case I would like to run tomcat with this Java argument:

-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager

I tried to add it in the systemProperties element but it did not work because Maven also uses JUL so it gets initialized before this system property is set.

The option I have now is to pass this argument to Maven, but then I would need to also add to Maven classpath all Lo4j2 jars which is not a good idea.

Then I searched for some options to let Tomcat be started in a separate JVM and I found this fork configuration, but now I know it will not work for me.

So maybe we will need another option to control whether we want to let the forked process running or not.
 "
MTOMCAT-276, Bruno P. Kinoshita,23/Nov/15 00:06,"Had the same issue, was looking for the exception and found this SO answer

http://stackoverflow.com/questions/16935290/maven-deploy-webapp-to-tomcat-before-junit-test

Stephen Connolly suggested to use `mvn verify` instead of `mvn integration-test` (which I was using), and the error disappeared. Tests running smoothly now. 

HTH
Bruno "
MTOMCAT-276, Benson Margulies,12/Jan/16 14:41,I'm suffering from this and I am not trying to run 'mvn integration-test'. 
MTOMCAT-276, Christos Karalis,20/May/16 08:39,"i´ve had the same the issue but was mostly due to the false configuration of maven-failsafe-plugin probably taken from another example from web. The proper configuration is : 

<executions>
  <execution>
    <id>integration-test</id>
    <goals>
      <goal>integration-test</goal>
    </goals>
  </execution>
  <execution>
    <id>verify</id>
    <goals>
      <goal>verify</goal>
    </goals>
  </execution>
</executions>


 instead of 

<executions>
  <execution>
    <id>integration-test</id>
    <goals>
      <goal>integration-test</goal>
      <goal>verify</goal>
    </goals>
  </execution>
</executions>

 "
MTOMCAT-279, Konstantin Kolinko,20/Sep/14 11:22,"Your snapshot repository URL is wrong. Where did you get it from?

See here for the correct address:
http://tomcat.apache.org/maven-plugin-trunk/distribution-management.html "
MTOMCAT-283, Konstantin Kolinko,30/Sep/14 09:16,"1. Steps to reproduce = ?

2. Why do you think it should have used it? Do you have UserDatabaseRealm and UserDatabase configured? "
MTOMCAT-283, Pasi Niemi,30/Sep/14 09:24,"Background to this issue is that we are deploying tomcats as executable jars and developers are using the maven plugin to do local testing. We assumed that the functionality in both would be the same and since tomcat-users.xml worked in the maven run plugin, we thought the same should work in the executable jar.

So steps to reproduce would be:
1. make a tomcat executable jar with a war that has a requirement for a role
2. include said role and a user on tomcat-users.xml and provide that on the classpath (either in the jar or externally)
3. Try to login with the credentials in tomcata-users.xml

We will propose a patch to make the two different functionalities more in line with eachother - ok? "
MTOMCAT-283, Pasi Niemi,30/Sep/14 09:40,"Patch to add:

1) tomcatUsers File property and handling in AbstractExecWarMojo
2) tomcatUsersPath option for Tomcat7RunnerCli
3) tomcat-users.xml handling for Tomcat7Runner "
MTOMCAT-283, Mikko Tommila,01/Apr/15 07:49,Test Maven project for reproducing this issue 
MTOMCAT-283, Mikko Tommila,01/Apr/15 07:51,"The use case is that we want to specify a tomcat-users.xml file, but we don't want to specify a server.xml file (because, mostly for everything we want to use the defaults, and then just use command line arguments to specify what we want differently).

We want to do this in a similar fashion in development and in production deployment, so we want it to work the same way when you launch an embedded Tomcat from Maven (with ""mvn tomcat7:run"" or ""mvn tomcat7:run-war"") and when you run an executable über-jar from the command line.

By default MemoryRealm is used.

Steps for running the test application (it will only work properly with the attached patch applied to tomcat-maven-plugin):

Unzip the attached tomcat-maven-plugin-test.zip
Go to the tomcat-maven-plugin-test directory

Run:
mvn clean install
mvn -Puber clean package

Now there are two ways we want to run the application:
Way 1)
mvn tomcat7:run

When you go to http://localhost:8080/test/protected.jsp
Login as admin/admin
-> Then you can see the page

Way 2)
cd target
java -cp .;tomcat-uber.jar org.apache.tomcat.maven.runner.Tomcat7RunnerCli

When you go to http://localhost:8080/test/protected.jsp
Login as admin/admin
-> Then you can also see the page "
MTOMCAT-286, Dennis Lundberg,30/Oct/14 13:20,Patch that fixes the problem in AbstractExecWarMojo. As far as I can tell there is no equivalent to this Mojo in tomcat6-maven-plugin. 
MTOMCAT-286, Olivier Lamy (*$^¨%`£),30/Oct/14 22:56,"applied
Thanks! "
MTOMCAT-286, Hudson,30/Oct/14 23:07,"SUCCESS: Integrated in TomcatMavenPlugin-mvn3.x #286 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x/286/)
MTOMCAT-286 Integration test fails on Windows
Submitted by  Dennis Lundberg (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1635634)

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractExecWarMojo.java

 "
MTOMCAT-286, Hudson,30/Oct/14 23:13,"FAILURE: Integrated in TomcatMavenPlugin-mvn3.x-windows #2 (See https://builds.apache.org/job/TomcatMavenPlugin-mvn3.x-windows/2/)
MTOMCAT-286 Integration test fails on Windows
Submitted by  Dennis Lundberg (olamy: http://svn.apache.org/viewvc/?view=rev&rev=1635634)

	/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/run/AbstractExecWarMojo.java

 "
MTOMCAT-286, Dennis Lundberg,31/Oct/14 07:57,"There seems to be more problems with integration tests on Windows, at least on ASF Jenkins. The error message from the failure above is:

Failed to execute goal org.codehaus.mojo:selenium-maven-plugin:2.3:xvfb (xvfb) on project artifact.id-webapp-it: Execution xvfb of goal org.codehaus.mojo:selenium-maven-plugin:2.3:xvfb failed: Execute failed: java.io.IOException: Cannot run program ""xauth"": CreateProcess error=2, The system cannot find the file specified "
MTOMCAT-287, Dennis Lundberg,31/Oct/14 08:05,The ITs run fine on my desktop Windows machine. 
MTOMCAT-289, John Harvey,04/Dec/14 20:29,"I found a way to turn on verbose logging, and tomcat is in fact loading the correct version.

It's an issue with dependency:resolve-plugins.
I have raised https://jira.codehaus.org/browse/MDEP-474
 "
MTOMCAT-289, John Harvey,04/Dec/14 20:29,Bug in other plugin: https://jira.codehaus.org/browse/MDEP-474 
MTOMCAT-305, v_iftodi_oodrive,16/Mar/16 14:31,"Hello,

This merge request https://github.com/apache/tomcat-maven-plugin/pull/17 has existed for a while and claim (looking at the code it seems as well) to fix this issue.

Will this be merged? I have encountered the same issue and it took a while for me to find the reason.
 "
MTOMCAT-308, Matthew Broadhead,01/Dec/16 11:18,is there a workaround for this issue? 
MTOMCAT-308, Matthew Broadhead,19/Jan/17 19:37,"hi, is anyone able to help with this issue? "
MTOMCAT-308, Matthew Broadhead,05/Feb/17 15:33,sorry to pester but is there anything happening on this project?  or can anyone give me some pointers to submitting a fix? 
MTOMCAT-309, Cory Lum,15/Feb/17 19:08,Just want to note that this is an issue when using JDK 1.7. I believe JDK 1.8 already removed the risky protocols.  
